{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\references\\contragent\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\references\\contragent\\index.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDb25maXJtTW9kYWwgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9jb25maXJtTW9kYWwiOwppbXBvcnQgQ29udHJhZ2VudFNlcnZpY2UgZnJvbSAiLi9jb250cmFnZW50LnNlcnZpZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBjb21wb25lbnRzOiB7Q29uZmlybU1vZGFsfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29udHJhZ2VudHM6IFtdLAogICAgICBjb2x1bW5zOiBbCiAgICAgICAge25hbWU6ICdpZCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5pbmRleCcpLCBmaWVsZDogJ2luZGV4J30sCiAgICAgICAge25hbWU6ICduYW1lJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLm5hbWUnKSwgZmllbGQ6ICduYW1lJ30sCiAgICAgICAge25hbWU6ICdwaG9uZU51bWJlcicsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5waG9uZV9udW1iZXInKSwgZmllbGQ6ICdwaG9uZU51bWJlcid9LAogICAgICAgIHtuYW1lOiAnbWFuemlsJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLmFkZHJlc3MnKSwgZmllbGQ6ICdhZGRyZXNzJ30sCiAgICAgICAge25hbWU6ICdhY3Rpb24nLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MuYWN0aW9uJyksIGZpZWxkOiAnYWN0aW9uJ30KICAgICAgXSwKICAgICAgY3JlYXRlOiB0cnVlLAogICAgICBjcmVhdGVNb2RhbDogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBwaG9uZU51bWJlcjogJys5OTgtJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJwogICAgICB9LAogICAgICBjb250cmFnZW50SWQ6IG51bGwsCiAgICAgIGRlbGV0ZU1vZGFsOiBmYWxzZSwKICAgIH0KICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRDb250cmFnZW50c0xpc3QoKSB7CiAgICAgIENvbnRyYWdlbnRTZXJ2aWNlLmdldENvbnRyYWdlbnRzKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuY29udHJhZ2VudHMgPSByZXMuZGF0YQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgY3JlYXRlRm9ybSgpIHsKICAgICAgdGhpcy5jcmVhdGUgPSB0cnVlCiAgICAgIHRoaXMuZm9ybSA9IHt9CiAgICAgIHRoaXMuY3JlYXRlTW9kYWwgPSB0cnVlCiAgICB9LAogICAgZWRpdEZvcm0oaXRlbSkgewogICAgICB0aGlzLmNyZWF0ZSA9IGZhbHNlCiAgICAgIHRoaXMuZm9ybSA9IGl0ZW0KICAgICAgdGhpcy5jcmVhdGVNb2RhbCA9IHRydWUKICAgIH0sCiAgICBkZWxldGVNb2RhbFRydWUoaWQpIHsKICAgICAgdGhpcy5jb250cmFnZW50SWQgPSBpZAogICAgICB0aGlzLmRlbGV0ZU1vZGFsID0gdHJ1ZQogICAgfSwKICAgIGRlbGV0ZUNvbnRyYWdlbnQoKSB7CiAgICAgIENvbnRyYWdlbnRTZXJ2aWNlLmRlbGV0ZUNvbnRyYWdlbnRzKHRoaXMuY29udHJhZ2VudElkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IGZhbHNlCiAgICAgICAgdGhpcy5nZXRDb250cmFnZW50c0xpc3QoKTsKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIHRoaXMuJHJlZnMuY2F0ZWdvcnlGb3JtLnZhbGlkYXRlKCkudGhlbih2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5jcmVhdGUpIHsKICAgICAgICAgICAgQ29udHJhZ2VudFNlcnZpY2UuY3JlYXRlQ29udHJhZ2VudHModGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVNb2RhbCA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy5nZXRDb250cmFnZW50c0xpc3QoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQ29udHJhZ2VudFNlcnZpY2UudXBkYXRlQ29udHJhZ2VudHModGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVNb2RhbCA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy5nZXRDb250cmFnZW50c0xpc3QoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ3JlcXVpcmVkX2Vycm9yJyksCiAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwgICAKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENvbnRyYWdlbnRzTGlzdCgpOwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/modules/references/contragent","sourcesContent":["<template>\n  <div>\n    <q-table\n      class=\"q-mx-auto shadow-10\"\n      bordered\n      row-key=\"id\"\n      row=\"row\"\n      :data=\"contragents\"\n      :columns=\"columns\"\n      :hide-pagination=\"true\"\n      :rows-per-page-options=\"[0]\"\n    >\n      <template v-slot:top>\n        <div class=\"q-table__title\">{{ $t('references.contragent') }}</div>\n        <q-space/>\n        <vs-button  success animation-type=\"rotate\" @click=\"createForm\">\n          <q-icon name=\"add\"/>\n          <template #animate>\n            <q-icon name=\"add\"/>\n          </template>\n        </vs-button>\n      </template>\n      <template v-slot:body-cell-id=\"props\">\n        <q-td class=\"text-center\">{{ props.rowIndex+1 }}</q-td>\n      </template>\n      <template v-slot:body-cell-code=\"props\">\n        <q-td class=\"text-center\">\n          <q-badge>{{ props.row.code }}</q-badge>\n        </q-td>\n      </template>\n      <template v-slot:body-cell-action=\"props\">\n        <q-td\n        class=\"text-center\">\n          <vs-button v-if=\"$can('Update', 'Contragent')\" style=\"display: inline-block\" flat icon primary @click=\"editForm(props.row)\">\n            <q-icon name=\"edit\"/>\n          </vs-button>\n          <vs-button v-if=\"$can('delete', 'Contragent')\" style=\"display: inline-block\" flat icon danger @click=\"deleteModalTrue(props.row.id)\">\n            <q-icon name=\"delete\"/>\n          </vs-button>\n        </q-td>\n      </template>\n    </q-table>\n    <!--    Create / Edit   -->\n    <vs-dialog blur prevent-close v-model=\"createModal\">\n      <template #header>\n        <b v-if=\"create\">{{ $t('references.new_contragent') }}</b>\n        <b v-else>{{ $t('references.edit_contragent') }}</b>\n      </template>\n      <q-separator/>\n      <validation-observer ref=\"categoryForm\" v-slot=\"{}\">\n        <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"name\">\n          <vs-input\n              state=\"primary\"\n            block\n            shadow\n            class=\"mt-3\"\n            :danger=\"!valid\"\n            :placeholder=\"$t('doc.name')\"\n            v-model=\"form.name\"\n            :label=\"$t('doc.name')\"\n            :class=\"!valid ? 'required' : ''\"\n          />\n        </validation-provider>\n        <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"address\">\n          <vs-input\n              state=\"primary\"\n              block\n              class=\"mt-3\"\n              :danger=\"!valid\"\n              v-model=\"form.address\"\n              :placeholder=\"$t('doc.address')\"\n              :label=\"$t('doc.address')\"\n              :class=\"!valid ? 'required' : ''\"\n          />\n        </validation-provider>\n        <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"phoneNumber\">\n          <vs-input\n              state=\"primary\"\n            block\n            class=\"mt-3\"\n            :danger=\"!valid\"\n            v-mask=\"'+998-##-###-##-##'\"\n            v-model=\"form.phoneNumber\"\n            :label=\"$t('doc.phone_number')\"\n            :placeholder=\"$t('doc.phone_number')\"\n            :class=\"!valid ? 'required' : ''\"\n            @keyup.enter=\"save\"\n          />\n        </validation-provider>\n      </validation-observer>\n      <template #footer>\n        <vs-button @keyup.enter=\"save\" class=\"mt-2\" block primary gradient @click=\"save\">{{ $t('actions.save') }}</vs-button>\n      </template>\n    </vs-dialog>\n    <!--     Delete     -->\n    <confirm-modal :model=\"deleteModal\" @submit=\"deleteContragent\" @close=\"deleteModal = false\" :text=\"$t('confirm_delete')\"/>\n  </div>\n</template>\n\n<script>\nimport ConfirmModal from \"../../../components/confirmModal\";\nimport ContragentService from \"./contragent.servie\";\n\nexport default {\n  name: \"index\",\n  components: {ConfirmModal},\n  data() {\n    return {\n      contragents: [],\n      columns: [\n        {name: 'id', align: 'center', label: this.$t('doc.index'), field: 'index'},\n        {name: 'name', align: 'center', label: this.$t('doc.name'), field: 'name'},\n        {name: 'phoneNumber', align: 'center', label: this.$t('doc.phone_number'), field: 'phoneNumber'},\n        {name: 'manzil', align: 'center', label: this.$t('doc.address'), field: 'address'},\n        {name: 'action', align: 'center', label: this.$t('doc.action'), field: 'action'}\n      ],\n      create: true,\n      createModal: false,\n      form: {\n        phoneNumber: '+998-',\n        name: '',\n        address: ''\n      },\n      contragentId: null,\n      deleteModal: false,\n    }\n  },\n  watch: {},\n  methods: {\n    getContragentsList() {\n      ContragentService.getContragents().then(res => {\n        this.contragents = res.data\n      }).catch(e => {\n        this.$vs.notification({\n          duration: 1000,\n          title: e.message,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    createForm() {\n      this.create = true\n      this.form = {}\n      this.createModal = true\n    },\n    editForm(item) {\n      this.create = false\n      this.form = item\n      this.createModal = true\n    },\n    deleteModalTrue(id) {\n      this.contragentId = id\n      this.deleteModal = true\n    },\n    deleteContragent() {\n      ContragentService.deleteContragents(this.contragentId).then(res => {\n        this.deleteModal = false\n        this.getContragentsList();\n      }).catch(e => {\n        this.$vs.notification({\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    save() {\n      this.$refs.categoryForm.validate().then(valid => {\n        if (valid) {\n          if (this.create) {\n            ContragentService.createContragents(this.form).then(res => {\n              this.createModal = false\n              this.getContragentsList();\n            }).catch(e => {\n              this.$vs.notification({\n                title: e.message,\n                duration: 1000,\n                progress: 'auto',\n                color: 'danger',\n                position: 'top-right'\n              })\n            })\n          } else {\n            ContragentService.updateContragents(this.form).then(res => {\n              this.createModal = false\n              this.getContragentsList();\n            }).catch(e => {\n              this.$vs.notification({\n                title: e.message,\n                duration: 1000,\n                progress: 'auto',\n                color: 'danger',\n                position: 'top-right'\n              })\n            })\n          }\n        } else {\n          this.$vs.notification({\n            duration: 1000,\n            title: this.$t('required_error'),\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      }).catch(e => {\n        this.$vs.notification({\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },   \n  },\n  created() {\n    this.getContragentsList();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}