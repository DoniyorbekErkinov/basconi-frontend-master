{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\post\\post\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\post\\post\\index.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7VG9rZW5TZXJ2aWNlfSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2UiOwppbXBvcnQgVXNlcnNTZXJ2aWNlIGZyb20gIi4uLy4uL21hbmFnZW1lbnQvdXNlcnMvdXNlcnMuc2VydmljZSI7CmltcG9ydCBEZXBhcnRtZW50U2VydmljZSBmcm9tICIuLi8uLi9tYW5hZ2VtZW50L2RlcGFydG1lbnQvZGVwYXJ0bWVudC5zZXJ2aWNlIjsKaW1wb3J0IFdhcmVIYXNlU2VydmljZSBmcm9tICIuLi8uLi93bXMvd2FyZWhvdXNlL3dhcmVob3VzZS5zZXJ2aWNlIjsKaW1wb3J0IFNhbGVTZXJ2aWNlIGZyb20gIi4vc2FsZS5zZXJ2aWNlIjsKaW1wb3J0IENvbmZpcm1Nb2RhbCBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL2NvbmZpcm1Nb2RhbCIKaW1wb3J0IENhc2hCb3hTZXJ2aWNlIGZyb20gIi4uLy4uL3JlZmVyZW5jZXMvY2FzaGJveC9jYXNoYm94LnNlcnZpY2UiOwppbXBvcnQgWlJlcG9ydFNlcnZpY2UgZnJvbSAiLi96LXJlcG9ydC5zZXJ2aWNlIjsKaW1wb3J0IFBheW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3JlZmVyZW5jZXMvcGF5bWVudC9wYXltZW50LnNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2luZG93V2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgICB1c2VySW5mbzoge30sCiAgICAgIHNhbGVMaXN0OiBbXSwKICAgICAgdG90YWxMaXN0OiAwLAogICAgICBzZWFyY2gxOiAnJywKICAgICAgZGVwTGlzdDogW10sCiAgICAgIHByb2R1Y3RMaXN0OiBbXSwKICAgICAgcHJvZHVjdEluZm86IHt9LAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAKICAgICAgfSwKICAgICAgcGF5bG9hZDogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDIwCiAgICAgIH0sCiAgICAgIHRvdGFsSXRlbXM6IDAsCiAgICAgIGRlcElkOiAnJywKICAgICAgc2VsZWN0ZWQ6ICcnLAogICAgICBzZWFyY2g6ICcnLAogICAgICBpdGVtSWQ6ICcnLAogICAgICBkeW5hbWljSXRlbTogewogICAgICAgIGNvdW50OiAxLAogICAgICAgIHNhbGVQcmljZTogMAogICAgICB9LAogICAgICBzYWxlZm9ybTogewogICAgICAgIGNhc2hib3hJZDogbnVsbCwKICAgICAgICBjYXNoYm94TmFtZTogIiIsCiAgICAgICAgY29tbWVudDogIiIsCiAgICAgICAgY29udHJhZ2VudElkOiBudWxsLAogICAgICAgIGNvbnRyYWdlbnROYW1lOiAiIiwKICAgICAgICBmcm9tRGVwYXJ0bWVudElkOiBudWxsLAogICAgICAgIGZyb21EZXBhcnRtZW50TmFtZTogIiIsCiAgICAgICAgcmVnRGF0ZTogIiIsCiAgICAgICAgcmVnTnVtYmVyOiAiIiwKICAgICAgICBzdGF0dXM6ICJBQ1RJVkUiLAogICAgICAgIHRvRGVwYXJ0bWVudElkOiBudWxsLAogICAgICAgIHpldFJlcG9ydElkOiBudWxsLAogICAgICAgIHRvRGVwYXJ0bWVudE5hbWU6ICIiLAogICAgICAgIHBheW1lbnRUeXBlSWQ6IG51bGwsCiAgICAgICAgYW1tb3VudDogMCwKICAgICAgICB0b3RvbENvdW50OiAwLAogICAgICAgIHdoSXRlbXM6W10sCiAgICAgICAgcGF5bWVudER0b3M6IFtdCiAgICAgIH0sCiAgICAgIHBheW1lbnREdG9zOiB7CiAgICAgICAgYW1tb3VudDogMCwKICAgICAgICBpZDogMCwKICAgICAgICBwYXltZW50VHlwZUlkOiAwLAogICAgICAgIHBheW1lbnRUeXBlTmFtZTogIiIsCiAgICAgICAgdG90b2xDb3VudDogMAogICAgICB9LAogICAgICBabW9kYWw6IGZhbHNlLAogICAgICBDbG9zZVptb2RhbDogZmFsc2UsCiAgICAgIHBheW1lbnQ6IGZhbHNlLAogICAgICBjb2RlOiBudWxsLAogICAgICB6Q29kZTogMTIzLAogICAgICBpdGVtc1RvdGFsOiAwLAogICAgICBpdGVtTW9kZWw6IGZhbHNlLAogICAgICB0b3RhbFBvcmR1Y3RzOiAwLAogICAgICB0b3RhbFN1bTogMCwKICAgICAgcGVuZGluZ01vZGFsOiBmYWxzZSwKICAgICAgZG9jSWQ6IG51bGwsCiAgICAgIHN1c3BlbmRlZExpc3Q6IFtdLAogICAgICBkZWxldGVNb2RhbDogZmFsc2UsCiAgICAgIGJlZm9yZVBvc3RNb2RhbDogZmFsc2UsCiAgICAgIGJlZm9yZVBvc3RGb3JtOiB7CiAgICAgICAgZGVwYXJ0bWVudElkOiAnJywKICAgICAgICBjYXNoQm94SWQ6ICcnCiAgICAgIH0sCiAgICAgIGNhc2hCb3g6IFtdLAogICAgICBsb2w6IHt9LAogICAgICB6Rm9ybTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGNhc2hib3hJZDogbnVsbCwKICAgICAgICBjYXNoYm94TmFtZTogIiIsCiAgICAgICAgZGVwYXJ0bWVudElkOiBudWxsLAogICAgICAgIGRlcGFydG1lbnROYW1lOiAiIiwKICAgICAgICBlbmQ6ICIiLAogICAgICAgIG9wZW46IHRydWUsCiAgICAgICAgc3RhcnQ6ICIiCiAgICAgIH0sCiAgICAgIGNsb3NlX1pfRm9ybTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGNhc2hib3hJZDogbnVsbCwKICAgICAgICBjYXNoYm94TmFtZTogIiIsCiAgICAgICAgZGVwYXJ0bWVudElkOiBudWxsLAogICAgICAgIGRlcGFydG1lbnROYW1lOiAiIiwKICAgICAgICBlbmQ6ICIiLAogICAgICAgIHN0YXJ0OiAiIgogICAgICB9LAogICAgICBjaGVja2VkWmV0SWQ6IG51bGwsCiAgICAgIHBheW1lbnRMaXN0OiBbXSwKICAgICAgZGVwSWQxOiAnJywKICAgICAgcGF5bWVudEFtb3VudDogJycKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENvbmZpcm1Nb2RhbAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhbGN1bGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2FsZWZvcm0ud2hJdGVtcy5yZWR1Y2UoKHRvdGFsLCBpdGVtKSA9PiB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2FsZWZvcm0uYW1tb3VudCA9IHRvdGFsICsgaXRlbS5jb3VudCAqIGl0ZW0uc2FsZVByaWNlCiAgICAgIH0sIDApCiAgICB9LAogICAgY2FsY3VsYXRlVG90YWwoKSB7CiAgICAgIHJldHVybiAgdGhpcy5zYWxlZm9ybS53aEl0ZW1zLnJlZHVjZSgodG90YWwsIGl0ZW0pID0+IHsKICAgICAgICByZXR1cm4gdGhpcy5zYWxlZm9ybS50b3RvbENvdW50ID0gdG90YWwgKyBpdGVtLmNvdW50CiAgICAgIH0sIDApCiAgICB9LAogICAgaXRlbXNMZW5ndGgoKSB7CiAgICAgIHRoaXMudG90YWxJdGVtcyA9IHRoaXMuc2FsZWZvcm0ud2hJdGVtcy5sZW5ndGgKICAgIH0sCiAgICBnZXREZXBhcnRtZW50TmFtZSgpIHsKICAgICAgdGhpcy5kZXBMaXN0LmZvckVhY2goZGVwID0+IHsKICAgICAgICBpZihkZXAuaWQgPT0gVG9rZW5TZXJ2aWNlLmdldERlcGFydG1lbnRJZCgpKXsKICAgICAgICAgIHJldHVybiB0aGlzLmxvbCA9IGRlcAogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgJ3NlYXJjaCc6IHsKICAgICAgaGFuZGxlcihlKSB7CiAgICAgICAgdGhpcy5nZXRJdGVtc0J5RGVwSWQoKTsKICAgICAgfQogICAgfSwKICAgICdwYXltZW50TGlzdCc6IHsKICAgICAgaGFuZGxlcihlKSB7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENhc2hCb3hCeUlkKGRlcElkMSl7CiAgICAgIHRoaXMuR2V0Q2FzaEJveExpc3QoZGVwSWQxKTsKICAgIH0sCiAgICBjYWxjdWxhdGVQcmljZShwYXltZW50LCBpbmRleCkgewogICAgICBsZXQgc3VtID0gMAogICAgICB0aGlzLnBheW1lbnRMaXN0LmZvckVhY2gocGF5ID0+IHsKICAgICAgICBwYXkuYW1vdW50ID0gcGFyc2VGbG9hdChwYXkuYW1vdW50KTsKICAgICAgICBpZiAocGF5LmFtb3VudCkKICAgICAgICAgIHN1bSArPSBwYXkuYW1vdW50CiAgICAgIH0pCiAgICAgIHBheW1lbnQuYW1vdW50ID0gdGhpcy5jYWxjdWxhdGUgLSBzdW07CiAgICAgIHRoaXMucGF5bWVudEFtb3VudCA9IHBheW1lbnQuYW1vdW50CiAgICAgIHRoaXMuJHNldCh0aGlzLnBheW1lbnRMaXN0LCBpbmRleCwgcGF5bWVudCk7CiAgICB9LAogICAgZ2V0UGF5bWVudExpc3QoKSB7CiAgICAgIFBheW1lbnRTZXJ2aWNlLmdldFBheW1lbnRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucGF5bWVudExpc3QgPSByZXMuZGF0YQogICAgICAgIHRoaXMucGF5bWVudExpc3QuZm9yRWFjaChwYXkgPT4gewogICAgICAgICAgcGF5LmFtb3VudCA9IDAKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGdldE1vcmUoKSB7CiAgICAgIHRoaXMucGFnaW5hdGlvbi5wYWdlID0gdGhpcy5wYWdpbmF0aW9uLnBhZ2UgKzEKICAgICAgdGhpcy5kZXBJZCA9IFRva2VuU2VydmljZS5nZXREZXBhcnRtZW50SWQoKQogICAgICBsZXQgbGlzdCA9IHt9CiAgICAgIFdhcmVIYXNlU2VydmljZS5nZXRJdGVtQnlEZXBJZEFuZFNlYXJjaCh0aGlzLmRlcElkLCB0aGlzLnNlYXJjaCwgdGhpcy5wYWdpbmF0aW9uKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGlzdCA9IHJlcy5kYXRhLmxpc3QKICAgICAgICB0aGlzLnRvdGFsTGlzdCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IE9iamVjdC5hc3NpZ24odGhpcy5wcm9kdWN0TGlzdC5jb25jYXQobGlzdCkpCiAgICAgIH0pCiAgICB9LAogICAgZ2V0Q3VycmVudFVzZXIoKSB7CiAgICAgIGxldCB1c2VyID0gVG9rZW5TZXJ2aWNlLmdldFVzZXJJbmZvKCkKICAgICAgVXNlcnNTZXJ2aWNlLmdldFVzZXJzQnlJZCh1c2VyLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy51c2VySW5mbyA9IHJlcy5kYXRhCiAgICAgIH0pCiAgICB9LAogICAgZ2V0SXRlbXNCeURlcElkKCkgewogICAgICB0aGlzLmRlcElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlcF9pZCcpCiAgICAgIFdhcmVIYXNlU2VydmljZS5nZXRJdGVtQnlEZXBJZEFuZFNlYXJjaCh0aGlzLmRlcElkLCB0aGlzLnNlYXJjaCwgdGhpcy5wYWdpbmF0aW9uKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IHJlcy5kYXRhLmxpc3QKICAgICAgICB0aGlzLnRvdGFsTGlzdCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgIH0pCiAgICB9LAogICAgZ2V0U2FsZVN1c3BlbmRlZCgpIHsKICAgICAgbGV0IGdldFN1c0Zvcm0gPSB7fQogICAgICBnZXRTdXNGb3JtLmNhc2hib3hJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXNoYm94SWQnKQogICAgICBnZXRTdXNGb3JtLmRlcGFydG1lbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZXBfaWQnKQogICAgICBTYWxlU2VydmljZS5nZXRTYWxlU3VzcGVuZGVkTGlzdChnZXRTdXNGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zYWxlTGlzdCA9IHJlcy5kYXRhCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBvcGVuUGVuZGluZ01vZGFsKCkgewogICAgICB0aGlzLnBlbmRpbmdNb2RhbCA9IHRydWUKICAgIH0sCiAgICBhc3luYyBtYWtlUGF5bWVudCgpIHsKICAgICAgYXdhaXQgdGhpcy5nZXRQYXltZW50TGlzdCgpCiAgICAgIHRoaXMucGF5bWVudCA9IHRydWUKICAgIH0sCiAgICBhZGRTYWxlTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuZHluYW1pY0l0ZW0uY291bnQgPiAwKSB7CiAgICAgICAgaWYgKHRoaXMuaXRlbUlkKSB7CiAgICAgICAgICBsZXQgaGFzID0gZmFsc2UsCiAgICAgICAgICAgICAgaW5kID0gMAogICAgICAgICAgdGhpcy5zYWxlZm9ybS53aEl0ZW1zLmZvckVhY2goKHdoSXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKHdoSXRlbS5pZCA9PT0gdGhpcy5keW5hbWljSXRlbS5pZCkgewogICAgICAgICAgICAgIGlmICh3aEl0ZW0ucmVtYWluaW5nID49IHRoaXMuZHluYW1pY0l0ZW0uY291bnQpIHsKICAgICAgICAgICAgICAgIGhhcyA9IHRydWUKICAgICAgICAgICAgICAgIGluZCA9IGluZGV4CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgaWYgKGhhcykgewogICAgICAgICAgICB0aGlzLnNhbGVmb3JtLndoSXRlbXMuc3BsaWNlKGluZCwgMSkKICAgICAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgICAgIHRoaXMuaXRlbUlkID0gJycKICAgICAgICAgICAgdGhpcy5pdGVtTW9kZWwgPSBmYWxzZQogICAgICAgICAgICB0aGlzLmNvbG9yID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5keW5hbWljSXRlbS5zYWxlUHJpY2UgPSAgK3RoaXMuZHluYW1pY0l0ZW0uc2FsZVByaWNlCiAgICAgICAgICBsZXQgaXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZHluYW1pY0l0ZW0pCiAgICAgICAgICBpZiAoaXRlbS5yZW1haW5pbmcgPj0gdGhpcy5keW5hbWljSXRlbS5jb3VudCkgewogICAgICAgICAgICB0aGlzLnNhbGVmb3JtLndoSXRlbXMudW5zaGlmdChpdGVtKQogICAgICAgICAgICB0aGlzLml0ZW1zVG90YWwgPSB0aGlzLnNhbGVmb3JtLndoSXRlbXMubGVuZ3RoCiAgICAgICAgICAgIHRoaXMuaXRlbU1vZGVsID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5pdGVtSWQgPSAnJwogICAgICAgICAgICB0aGlzLmR5bmFtaWNJdGVtLmNvdW50ID0gbnVsbAogICAgICAgICAgICB0aGlzLmR5bmFtaWNJdGVtLnNhbGVQcmljZSA9IG51bGwKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgICAgLy8gdGl0bGU6IHRoaXMuJHQoJ2JpZy1jb3VudCcpLAogICAgICAgICAgICAgIHRpdGxlOiAnSXRlbSBJZCcsCiAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgIC8vIHRpdGxlOiB0aGlzLiR0KCdiaWctY291bnQnKSwKICAgICAgICAgICAgdGl0bGU6ICdJdGVtIElkJywKICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgLy8gdGl0bGU6IHRoaXMuJHQoJ2JpZy1jb3VudCcpLAogICAgICAgICAgdGl0bGU6ICdTb24ga2lyaXRpbG1hZ2FuJywKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVEeW5hbWljSXRlbShpbmRleCkgewogICAgICB0aGlzLnNhbGVmb3JtLndoSXRlbXMuc3BsaWNlKGluZGV4LCAxKQogICAgICB0aGlzLml0ZW1zVG90YWwtLQogICAgfSwKICAgIGNyZWF0ZVNhbGVGb3JtKCkgewogICAgICBpZiAoIXRoaXMuWm1vZGFsKSB7CiAgICAgIFNhbGVTZXJ2aWNlLkNyZWF0ZUVtcHR5RG9jKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2FsZWZvcm0gPSB7CiAgICAgICAgICB3aEl0ZW1zOiBbCiAgICAgICAgICAgIHtzYWxlUHJpY2U6IG51bGx9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICAgIHRoaXMuc2FsZWZvcm0gPSByZXMuZGF0YQogICAgICAgIHRoaXMuc2FsZWZvcm0uZnJvbURlcGFydG1lbnRJZCA9IHRoaXMudXNlckluZm8uZGVwYXJ0bWVudElkCiAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgdGhpcy5zYWxlZm9ybS53aEl0ZW1zID0gW10KICAgICAgICB0aGlzLmdldEl0ZW1zQnlEZXBJZCgpCiAgICAgICAgdGhpcy5nZXRTYWxlU3VzcGVuZGVkKCkKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgICB9CiAgICB9LAogICAgZ2V0SXRlbURlc2NyaXB0aW9uKGNvbikgewogICAgICB0aGlzLnByb2R1Y3RJbmZvID0gY29uCiAgICAgIHRoaXMuZHluYW1pY0l0ZW0gPSB0aGlzLnByb2R1Y3RJbmZvCiAgICAgIHRoaXMuaXRlbUlkID0gY29uLmlkCiAgICAgIHRoaXMucHJvZHVjdEluZm8uY291bnQgPSAxCiAgICAgIHRoaXMucHJvZHVjdEluZm8uc2FsZVByaWNlID0gY29uLnByaWNlCiAgICAgIHRoaXMuaXRlbU1vZGVsID0gdHJ1ZQogICAgfSwKICAgIG1ha2VFbXB0eSgpIHsKICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgIHRoaXMuaXRlbUlkID0gJycKICAgICAgdGhpcy5keW5hbWljSXRlbS5jb3VudCA9IG51bGwKICAgICAgdGhpcy5keW5hbWljSXRlbS5zYWxlUHJpY2UgPSBudWxsCiAgICB9LAogICAgZWRpdFNhbGUoaWQpIHsKICAgICAgdGhpcy5kb2NJZCA9IGlkCiAgICAgIFNhbGVTZXJ2aWNlLmdldFNhbGVMaXN0QnlJZCh0aGlzLmRvY0lkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgdGhpcy5pdGVtSWQgPSAnJwogICAgICAgIHRoaXMuc2FsZWZvcm0gPSB7CiAgICAgICAgICAuLi5yZXMuZGF0YSwKICAgICAgICAgIHNhbGVQcmljZTogcmVzLmRhdGEud2hEb2NJdGVtcy5zYWxlUHJpY2UsCiAgICAgICAgICB3aEl0ZW1zOiByZXMuZGF0YS53aERvY0l0ZW1zLAogICAgICAgICAgd2hEb2NJdGVtczogbnVsbAogICAgICAgIH0KICAgICAgICB0aGlzLnBheW1lbnQgPSB0cnVlCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBvcGVuRGVsZXRlTW9kYWwoaWQpIHsKICAgICAgdGhpcy5kb2NJZCA9IG51bGwKICAgICAgdGhpcy5kb2NJZCA9IGlkCiAgICAgIHRoaXMuZGVsZXRlTW9kYWwgPSB0cnVlCiAgICB9LAogICAgZGVsZXRlU2FsZURvYygpIHsKICAgICAgU2FsZVNlcnZpY2UuZGVsZXRlU2FsZURvYyh0aGlzLmRvY0lkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5nZXRTYWxlU3VzcGVuZGVkKCk7CiAgICAgICAgdGhpcy5nZXRJdGVtc0J5RGVwSWQoKTsKICAgICAgICB0aGlzLnBlbmRpbmdNb2RhbCA9IGZhbHNlCiAgICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IGZhbHNlCiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ3N1Y2Nlc3NfZGVsZXRlZCcpLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgY2xlYXIoKSB7CiAgICAgIHRoaXMuc2FsZWZvcm0ud2hJdGVtcyA9IFtdCiAgICAgIHRoaXMudG90YWxQb3JkdWN0cyA9IDAKICAgICAgdGhpcy50b3RhbFN1bSA9IDAKICAgICAgdGhpcy5wYXltZW50ID0gZmFsc2UKICAgICAgdGhpcy5pdGVtc1RvdGFsID0gbnVsbAogICAgfSwKICAgIEJlZm9yZVBvc3QoKSB7CiAgICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXNoYm94SWQnKSA9PT0gbnVsbCAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVwX2lkJykgPT09IG51bGwpewogICAgICAgIHRoaXMuYmVmb3JlUG9zdE1vZGFsID0gdHJ1ZQogICAgICAgIHRoaXMuY2hlY2taUmVwb3J0KCkKICAgICAgICB0aGlzLkdldERlcGFydG1lbnRMaXN0KCkKICAgICAgICB0aGlzLkdldENhc2hCb3hMaXN0KCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNyZWF0ZVNhbGVGb3JtKCkKICAgICAgICB0aGlzLmJlZm9yZVBvc3RNb2RhbCA9IGZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBnb0hvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnRGFzaGJvYXJkJ30pCiAgICB9LAogICAgR2V0RGVwYXJ0bWVudExpc3QoKSB7CiAgICAgIERlcGFydG1lbnRTZXJ2aWNlLmdldERlcEJ5QWNjZXNzKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVwTGlzdCA9IHJlcy5kYXRhIHx8IFtdCiAgICAgIH0pCiAgICB9LAogICAgR2V0Q2FzaEJveExpc3QoKSB7CiAgICAgIENhc2hCb3hTZXJ2aWNlLmdldEJ5RGViSWQodGhpcy5kZXBJZDEpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmNhc2hCb3ggPSByZXMuZGF0YSB8fCBbXQogICAgICB9KQogICAgfSwKICAgIHNldEJlZm9yZVBvc3RJZHNUb0xvY2FsZSgpIHsKICAgICAgdGhpcy5iZWZvcmVQb3N0Rm9ybS5kZXBhcnRtZW50SWQgPSB0aGlzLmRlcElkMQogICAgICBpZih0aGlzLmJlZm9yZVBvc3RGb3JtLmNhc2hCb3hJZCAmJiB0aGlzLmJlZm9yZVBvc3RGb3JtLmRlcGFydG1lbnRJZCkgewogICAgICAgIFRva2VuU2VydmljZS5zYXZlQ2FzaEJveElkKHRoaXMuYmVmb3JlUG9zdEZvcm0uY2FzaEJveElkKQogICAgICAgIFRva2VuU2VydmljZS5zZXREZXBhcnRtZW50SWQodGhpcy5iZWZvcmVQb3N0Rm9ybS5kZXBhcnRtZW50SWQpCiAgICAgICAgdGhpcy5jcmVhdGVTYWxlRm9ybSgpCiAgICAgICAgdGhpcy5nZXRJdGVtc0J5RGVwSWQoKQogICAgICAgIHRoaXMuYmVmb3JlUG9zdE1vZGFsID0gZmFsc2UKICAgICAgfQogICAgICB0aGlzLmNoZWNrWlJlcG9ydCgpCiAgICB9LAogICAgY2xvc2VaY29kZSgpIHsKICAgICAgaWYgKHRoaXMuekNvZGUgPT0gdGhpcy5jb2RlKSB7CiAgICAgICAgdGhpcy56Rm9ybS5jYXNoYm94SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FzaGJveElkJykKICAgICAgICB0aGlzLnpGb3JtLmRlcGFydG1lbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZXBfaWQnKQogICAgICAgIFpSZXBvcnRTZXJ2aWNlLkNyZWF0ZVpfUmVwb3J0KHRoaXMuekZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuY2hlY2tlZFpldElkID0gcmVzLmRhdGEuaWQKICAgICAgICAgIHRoaXMuY3JlYXRlU2FsZUZvcm0oKQogICAgICAgICAgdGhpcy5abW9kYWwgPSBmYWxzZQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBjaGVja1pSZXBvcnQoKSB7CiAgICAgIFpSZXBvcnRTZXJ2aWNlLkNoZWNrWmV0UmVwb3J0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZXBfaWQnKSwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Nhc2hib3hJZCcpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jaGVja2VkWmV0SWQgPSByZXMuZGF0YS5pZAogICAgICAgIGlmKHJlcy5kYXRhLm9wZW4pIHsKICAgICAgICAgIHRoaXMuY3JlYXRlU2FsZUZvcm0oKQogICAgICAgICAgdGhpcy5abW9kYWwgPSBmYWxzZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLlptb2RhbCA9IHRydWUKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgY2xvc2VaUmVwb3J0KCkgewogICAgICB0aGlzLmNsb3NlX1pfRm9ybS5jYXNoYm94SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FzaGJveElkJykKICAgICAgdGhpcy5jbG9zZV9aX0Zvcm0uZGVwYXJ0bWVudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlcF9pZCcpCiAgICAgIHRoaXMuY2xvc2VfWl9Gb3JtLmlkID0gdGhpcy5jaGVja2VkWmV0SWQKICAgICAgWlJlcG9ydFNlcnZpY2UuQ2xvc2VaUmVwb3J0KHRoaXMuY2xvc2VfWl9Gb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5DbG9zZVptb2RhbCA9IGZhbHNlCiAgICAgICAgdGhpcy5jaGVja1pSZXBvcnQoKQogICAgICAgIHRoaXMuQmVmb3JlUG9zdCgpCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0aXRsZTogdGhpcy4kdCgncG9zdC56X3JlcG9ydF9jbG9zZV9lcnJvcicpLAogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICBjb2xvcjogJ2RhbmdpcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1jZW50ZXInLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHNhdmUoc3RhdHVzKSB7CiAgICAgIGlmKHRoaXMucGF5bWVudER0b3MgIT09IFtdKSB7CiAgICAgICAgaWYodGhpcy5wYXltZW50QW1vdW50ICE9PSAnJykgewogICAgICAgICAgdGhpcy5zYWxlZm9ybS5zdGF0dXMgPSBzdGF0dXMKICAgICAgICAgIHRoaXMuc2FsZWZvcm0ud2hEb2NJdGVtcyA9IG51bGwKICAgICAgICAgIGxldCB0bXAgPSB0cnVlCiAgICAgICAgICBpZihzdGF0dXMgPT09ICdSRUFEWScpIHsKICAgICAgICAgICAgaWYodGhpcy5zYWxlZm9ybS53aEl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0bXAgPSB0cnVlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG1wID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2l0ZW1fcmVxdWlyZWRfZXJyb3InKSwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYodG1wKSB7CiAgICAgICAgICAgIHRoaXMuc2FsZWZvcm0uY2FzaGJveElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Nhc2hib3hJZCcpCiAgICAgICAgICAgIHRoaXMuc2FsZWZvcm0uemV0UmVwb3J0SWQgPSB0aGlzLmNoZWNrZWRaZXRJZAogICAgICAgICAgICB0aGlzLnNhbGVmb3JtLnBheW1lbnREdG9zID0gdGhpcy5wYXltZW50TGlzdC5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHBheW1lbnRUeXBlSWQ6ZS5pZCwKICAgICAgICAgICAgICAgIGFtb3VudDplLmFtb3VudCwKICAgICAgICAgICAgICAgIG5hbWU6ZS5uYW1lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5maWx0ZXIoZSA9PiBlLmFtb3VudCAmJiBlLmFtb3VudD4wICkKICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5zYWxlZm9ybS53aEl0ZW1zLnNhbGVQcmljZSkKICAgICAgICAgICAgdGhpcy5zYWxlZm9ybS5mcm9tRGVwYXJ0bWVudElkID0gdGhpcy5sb2wuaWQKICAgICAgICAgICAgdGhpcy5zYWxlZm9ybS5mcm9tRGVwYXJ0bWVudE5hbWUgPSB0aGlzLmxvbC5uYW1lCiAgICAgICAgICAgIFNhbGVTZXJ2aWNlLnNhdmVTYWxlKHRoaXMuc2FsZWZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnBheW1lbnQgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2FsZUZvcm0oKQogICAgICAgICAgICAgIHRoaXMuY2xlYXIoKQogICAgICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnc3VjY2Vzc191cGRhdGVkJyksCiAgICAgICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5nZXRTYWxlU3VzcGVuZGVkKCkKICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdwYXltZW50X2Vycm9yJyksCiAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdwYXltZW50X2Vycm9yJyksCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLypzYXZlU3VzcGVuZGVkKGlkKSB7CiAgICAgIHRoaXMuc2FsZWZvcm0ud2hEb2NJdGVtcyA9IG51bGwKICAgICAgdGhpcy5kb2NJZCA9IGlkCiAgICAgICAgdGhpcy5zYWxlZm9ybS5zdGF0dXMgPSAnUkVBRFknCiAgICAgICAgU2FsZVNlcnZpY2Uuc2F2ZVNhbGUodGhpcy5zYWxlZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5wYXltZW50ID0gZmFsc2UKICAgICAgICAgIHRoaXMuY3JlYXRlU2FsZUZvcm0oKQogICAgICAgICAgdGhpcy5jbGVhcigpCiAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnc3VjY2Vzc191cGRhdGVkJyksCiAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sKi8KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5CZWZvcmVQb3N0KCkKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEN1cnJlbnRVc2VyKCk7CiAgICB0aGlzLmdldFNhbGVTdXNwZW5kZWQoKTsKICAgIHRoaXMuR2V0RGVwYXJ0bWVudExpc3QoKQogICAgdGhpcy5nZXRJdGVtc0J5RGVwSWQoKQogICAgdGhpcy5jaGVja1pSZXBvcnQoKQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/modules/post/post","sourcesContent":["<template>\n  <div>\n    {{itemsLength}}\n    <q-toolbar>\n      {{getDepartmentName}}\n      <q-fab style=\"z-index: 1000; right: 18px; top: -15px; font-size: 16px\" padding=\"xs\" color=\"secondary\" glossy icon=\"keyboard_arrow_down\" direction=\"down\">\n        <q-fab-action style=\"z-index: 999; margin-top: -8px\" color=\"primary\" padding=\"xs\" text-color=\"white\" icon=\"mdi-lightning-bolt-circle\" @click=\"openPendingModal\"/>\n        <q-fab-action @click=\"CloseZmodal = true\" padding=\"xs\" style=\"z-index: 999; font-size: 16px; font-weight: 600; padding-left: 7px; padding-right: 7px; margin-top: -3px\" color=\"accent\" text-color=\"white\" >Z</q-fab-action>\n      </q-fab>\n      <q-toolbar-title style=\"font-size: 18px; height: 55px; color: #030385\"><b>{{ userInfo.name }}</b> -\n        <b>{{  lol.name }}</b>\n      </q-toolbar-title>\n    </q-toolbar>\n    <q-btn @click=\"makePayment\" round icon=\"shopping_cart\" class=\"q-ml-md fixed bg-blue-grey-13 text-white\" style=\"z-index: 1000; right: 18px; top: 190px; font-size: 18px\">\n      <q-badge style=\"margin-top: 5px; \" align=\"middle\" color=\"red\" floating>{{ totalItems  }}</q-badge>\n    </q-btn>\n    <q-separator/>\n    <vs-row justify=\"center\">\n      <vs-col w=\"12\" class=\"mt-1\">\n        <vs-input state=\"primary\" block icon-after class=\"q-mr-lg\" v-model=\"search\" :placeholder=\"$t('actions.search')\">\n          <template #icon>\n            <q-icon name=\"search\"/>\n          </template>\n        </vs-input>\n      </vs-col>\n    </vs-row>\n    <div class=\"row\">\n      <div class=\"mt-1\" :class=\"windowWidth < 600 ? 'col-4' : 'col-2'\" v-for=\"(con, ind) in productList\" :key=\"`productList-${ind}`\">\n        <q-card @click=\"getItemDescription(con)\" class=\"no-padding q-mx-xs\"\n                :class=\" saleform.whItems.findIndex((e) => e.id == con.id) > -1 ? 'bg-green-12' : 'bg-light-blue-3'\"\n                 style=\"margin: 2px 2px\" align=\"left\">\n          <q-badge style=\"width: 85px; left: -5px;  top: -5px;\" rounded  color=\"red-6\" floating>{{ con.price }}: {{$t('uzb_currency')}}</q-badge>\n          <q-card-section v-if=\"windowWidth < 600\">\n<!--            <div>{{ con.itemName }}</div>-->\n            <div>{{ con.itemCku }}</div>\n            <div>{{ con.colorName }}</div>\n            <div>{{ con.sizeOlcham }} / {{ con.remaining }}</div>\n          </q-card-section>\n          <q-card-section v-else class=\"pl-1\">\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.brandName }}</span></div>\n              <div style=\"text-align: left\"><b>{{ $t('items.sku') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.itemCku }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.count') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.remaining }}</span></div>\n              <div style=\"text-align: left\"><b>{{ $t('items.size') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.sizeOlcham }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.colors') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.colorName }}</span></div>\n<!--              <div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ con.brandName }}</span></div>-->\n            </div>\n          </q-card-section>\n        </q-card>\n      </div>\n    </div>\n    <vs-row justify=\"center\">\n      <vs-col w=\"6\" justify=\"center\">\n        <vs-button block :disabled=\"totalList < 20\" @click=\"getMore\" primary gradient>Load More</vs-button>\n      </vs-col>\n    </vs-row>\n    <!-- Modal For Get Item By Id -->\n    <vs-dialog v-model=\"itemModel\" blur style=\"margin-bottom: 105px\" width=\"100%\" @close=\"makeEmpty\">\n      <q-toolbar>\n        <q-toolbar-title>{{ $t('references.reference_product') }}</q-toolbar-title>\n      </q-toolbar>\n      <div class=\"no-padding no-margin\">\n        <q-card class=\"no-padding mb-1\">\n          <q-card-section class=\"pl-1\">\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.brandName }}</span></div>\n              <div style=\"text-align: left\"><b>{{ $t('items.sku') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.itemCku }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.count') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.remaining }}</span></div>\n              <div style=\"text-align: left\"><b>{{ $t('items.size') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.sizeOlcham }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.colors') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.colorName }}</span></div>\n              <!--<div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ productInfo.brandName }}</span></div>-->\n            </div>\n            <q-separator/>\n            <div class=\"mt-1\" style=\"text-align: left\">\n              <b>{{ $t('items.price') }}:</b>\n              <span class=\"text-pink-6 mt-1 ml-1\" style=\"font-size: 16px;\">{{productInfo.price }}</span>\n            </div>\n          </q-card-section>\n        </q-card>\n      </div>\n      <vs-row class=\"mt-2\">\n        <vs-col w=\"6\">\n          <vs-input type=\"number\" state=\"primary\" block v-model=\"dynamicItem.salePrice\"/>\n        </vs-col>\n        <vs-col w=\"6\">\n          <q-btn-group>\n            <q-btn padding=\"xs\" @click=\"dynamicItem.count > 0 ? dynamicItem.count-- : null\" color=\"green\"\n                   icon=\"arrow_left\"/>\n            <q-btn >{{ dynamicItem.count }}</q-btn>\n            <q-btn :disable=\"dynamicItem.count === productInfo.remaining\" padding=\"xs\"\n                   @click=\"dynamicItem.count >= 0 ? dynamicItem.count++ : null\" color=\"green\" icon=\"arrow_right\"/>\n          </q-btn-group>\n        </vs-col>\n        <vs-row justify=\"center\">\n          <vs-col class=\"mt-1\" w=\"8\">\n            <vs-button @click=\"addSaleList\" block color=\"success\" style=\"font-size: 12px; font-weight: 400; letter-spacing: 1px;\">\n              <i class=\"mdi mdi-cart-plus mr-1\"/> {{ $t('post.add') }}\n            </vs-button>\n          </vs-col>\n        </vs-row>\n      </vs-row>\n    </vs-dialog>\n<!--     Z-Modal -->\n    <vs-dialog v-model=\"Zmodal\" blur prevent-close @close=\"goHome\" width=\"60%\">\n      <q-toolbar>\n        <q-toolbar-title>{{ $t('post.z-report') }} / {{ $t('doc.code') }}: {{ zCode }}</q-toolbar-title>\n      </q-toolbar>\n      <q-separator/>\n      <vs-row justify=\"center\">\n        <vs-input block class=\"mt-1\" state=\"primary\" v-model=\"code\"/>\n        <vs-col :w=\"windowWidth < 600 ? '6' : '2'\" class=\"mt-1\">\n          <vs-button class=\"ml-3\" @click=\"closeZcode\">{{ $t('actions.save') }}</vs-button>\n        </vs-col>\n      </vs-row>\n    </vs-dialog>\n<!--     Close Z-Modal   -->\n    <vs-dialog v-model=\"CloseZmodal\" blur prevent-close @close=\"getItemsByDepId\" width=\"100%\">\n      <q-toolbar>\n        <q-toolbar-title>\n          {{$t('post.close-z')}}\n        </q-toolbar-title>\n      </q-toolbar>\n      <vs-row justify=\"space-around\" width=\"100%\">\n        <vs-col w=\"5\">\n          <vs-button @click=\"closeZReport\" block success gradient>{{$t('actions.yes')}}</vs-button>\n        </vs-col>\n        <vs-col w=\"5\">\n          <vs-button @click=\"CloseZmodal = false\" block danger gradient>{{$t('actions.no')}}</vs-button>\n        </vs-col>\n      </vs-row>\n    </vs-dialog>\n<!--    To'lov-->\n    <vs-dialog v-model=\"payment\"  blur prevent-close width=\"100%\">\n      <q-toolbar>\n        <vs-row>\n          <vs-col w=\"1\">\n            <vs-button style=\"top: -8px\" flat icon danger @click=\"clear\">\n              <q-icon name=\"delete\"/>\n            </vs-button>\n          </vs-col>\n          <vs-col w=\"11\">\n            <q-toolbar-title>{{ $t('post.payment') }}</q-toolbar-title>\n          </vs-col>\n        </vs-row>\n      </q-toolbar>\n      <vs-row>\n        <vs-col class=\"mb-1\">\n          <q-toolbar-title>\n            {{ calculateTotal }}: {{ calculate }} So'm\n          </q-toolbar-title>\n        </vs-col>\n      </vs-row>\n      <div>\n        <q-card  class=\"no-padding mb-1\" v-for=\"(item, i) in saleform.whItems\" :key=\"item.id\">\n          <q-btn\n            :class=\"windowWidth < 600 ? 'small' : 'desktop'\"\n            round\n            color=\"negative\"\n            size=\"sm\"\n            icon=\"close\"\n            @click=\"deleteDynamicItem(i)\"\n          ></q-btn>\n          <q-card-section vertical class=\"pl-1\">\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ item.brandName }}</span></div>\n              <div style=\"text-align: left\"><b>{{ $t('items.sku') }}:</b> <span\n                  class=\"text-pink-6\">{{ item.itemCku }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between;\" class=\"mt-1 mb-1\">\n              <div style=\"text-align: left\"><b>{{ $t('items.count') }}:</b>\n                <q-btn-group style=\"padding: 2px;\" class=\"ml-1\">\n                  <q-btn padding=\"xs\" @click=\"item.count > 0 ? item.count-- : null\" color=\"green\"\n                         icon=\"arrow_left\"/>\n                  <q-btn >{{ item.count }}</q-btn>\n                  <q-btn :disable=\"item.count === productInfo.remaining\" padding=\"xs\"\n                         @click=\"item.count >= 0 ? item.count++ : null\" color=\"green\" icon=\"arrow_right\"/>\n                </q-btn-group>\n              </div>\n              <div style=\"text-align: left\"><b>{{ $t('items.size') }}:</b> <span\n                  class=\"text-pink-6\">{{ item.sizeOlcham }}</span></div>\n            </div>\n            <q-separator/>\n            <div style=\"display: flex; justify-content: space-between\">\n              <div style=\"text-align: left\"><b>{{ $t('items.colors') }}:</b> <span\n                  class=\"text-pink-6\">{{ item.colorName }}</span></div>\n              <!--<div style=\"text-align: left\"><b>{{ $t('items.brand') }}:</b> <span\n                  class=\"text-pink-6\">{{ item.brandName }}</span></div>-->\n            </div>\n            <q-separator/>\n            <div style=\"text-align: center\">\n              <b>{{ $t('post.sold_price') }}:</b>\n              <span class=\"text-pink-6 mt-1\" style=\"font-size: 16px;\">{{item.salePrice }}</span>\n            </div>\n          </q-card-section>\n        </q-card>\n      </div>\n      <template #footer>\n        <div style=\"display: flex; justify-content: center; flex-direction: column\">\n          <div v-for=\"(payment, i) in paymentList\" :key=\"i\">\n            <div style=\"display: flex; justify-content: center; flex-direction: row;\" class=\"mt-1\">\n              <vs-button @click=\"calculatePrice(payment, i)\">{{payment.name}}</vs-button>\n              <input :id=\"`price-${i}`\" state=\"primary\" v-model=\"paymentList[i].amount\" :key=\"i\" class=\"vs-input a\"/>\n            </div>\n          </div>\n        </div>\n        <vs-row>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button @click=\"save('READY')\" :class=\"windowWidth > 600 ? 'mt-1 mr-1' : 'mt-1'\" block success gradient>{{ $t('post.payment') }}</vs-button>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button  @click=\"save('SUSPENDED')\" :class=\"windowWidth > 600 ? 'mt-1 mr-1' : ''\" block warn gradient>{{ $t('actions.save') }}</vs-button>\n          </vs-col>\n        </vs-row>\n      </template>\n    </vs-dialog>\n    <!--  Pending Modal  -->\n    <vs-dialog v-model=\"pendingModal\"  blur prevent-close :width=\"windowWidth > 600 ? '100%' : '60%'\">\n      <q-toolbar>\n        <vs-row>\n          <vs-col w=\"12\">\n            <q-toolbar-title>{{ $t('post.payment') }}</q-toolbar-title>\n          </vs-col>\n        </vs-row>\n      </q-toolbar>\n      <q-separator/>\n      <div class=\"row\">\n        <div class=\"col-10 mt-1\" style=\"margin: 0 auto\">\n          <q-expansion-item v-for=\"item in saleList\" :key=\"item.id\" :label=\"item.regNumber\" style=\"border-radius: 15px\" header-class=\"bg-primary text-white\" expand-icon-class=\"text-white\" class=\"shadow-1 overflow-hidden mt-1\">\n            <q-card class=\"mb-1 bg-grey-2\">\n              <q-card-section>\n                <div style=\"text-align: left\">\n                  <b>{{ $t('doc.regDate') }}: </b>\n                  <span class=\"text-pink-6 ml-2\">{{ item.regDate }}</span>\n                </div>\n                <div style=\"text-align: left\" >\n                  <b >{{ $t('doc.regNumber') }}:</b>\n                  <span style=\"text-align: right; margin-left: 3px\" class=\"text-pink-6\">{{ item.regNumber }}</span>\n                </div>\n                <q-card class=\"q-pa-sm mb-1 \" v-for=\"(subItem, i) in item.whDocItems\" :key=\"`subItem-${i}`\">\n                  <div style=\"text-align: left\">\n                    <b>{{ $t('items.sku') }}: </b>\n                    <span class=\"text-pink-6 ml-2\">{{ subItem.cku }}</span>\n                  </div>\n                  <div style=\"text-align: left\">\n                    <b>{{ $t('items.size') }}: </b>\n                    <span class=\"text-pink-6\">{{ subItem.sizeOlcham }}</span>\n                  </div>\n                  <div style=\"text-align: left\">\n                    <b>{{ $t('items.count') }}: </b>\n                    <span class=\"text-pink-6 ml-2\">{{ subItem.count }}</span>\n                  </div>\n                  <div style=\"text-align: left\">\n                    <b>{{ $t('post.sold_price') }}:</b>\n                    <span class=\"text-pink-6 ml-2\">{{ subItem.salePrice }}</span>\n                  </div>\n                </q-card>\n              </q-card-section>\n              <q-card-actions>\n                <div class=\"row\" style=\"justify-content: space-between; margin: 0 auto\">\n                  <div class=\"col-5\">\n                    <vs-button  @click=\"editSale(item.id)\"  block primary gradient>\n                      <q-icon name=\"edit\"/>\n                    </vs-button>\n                  </div>\n                  <div class=\"col-5\">\n                    <vs-button  @click=\"openDeleteModal(item.id)\"block danger gradient>\n                      <q-icon name=\"delete\"/>\n                    </vs-button>\n                  </div>\n                </div>\n              </q-card-actions>\n            </q-card>\n          </q-expansion-item>\n        </div>\n      </div>\n    </vs-dialog>\n    <!--          BeforePos          -->\n    <vs-dialog v-model=\"beforePostModal\" @close=\"goHome\"  blur prevent-close :width=\"windowWidth > 600 ? '100%' : '60%'\">\n      <q-toolbar>\n        <q-toolbar-title>\n          {{$t('post.start_sale')}}\n        </q-toolbar-title>\n      </q-toolbar>\n      <vs-select\n        block\n        class=\"mt-3\"\n        @change=\"getCashBoxById($event)\"\n        v-model=\"depId1\"\n        :key=\"`depList-${depList.length}`\"\n        :label=\"$t('doc.department')\"\n      >\n        <vs-option v-for=\"dep in depList\" :key=\"dep.id\" :value=\"dep.id\" :label=\"dep.name\">\n          {{dep.name}}\n        </vs-option>\n      </vs-select>\n      <vs-select\n          block\n          class=\"mt-3\"\n          v-model=\"beforePostForm.cashBoxId\"\n          :key=\"`${cashBox.length}`\"\n          :label=\"$t('management.cash_box_name')\"\n      >\n        <vs-option v-for=\"cash in cashBox\" :key=\"cash.id\" :value=\"cash.id\" :label=\"cash.name\">\n          {{cash.name}}\n        </vs-option>\n      </vs-select>\n      <vs-row justify=\"center\">\n        <vs-col w=\"6\" class=\"mt-3\">\n          <vs-button block @click=\"setBeforePostIdsToLocale\">\n            {{$t('post.go_pos')}}\n          </vs-button>\n        </vs-col>\n      </vs-row>\n    </vs-dialog>\n    <!--       Delete       -->\n    <confirm-modal :model=\"deleteModal\" @submit=\"deleteSaleDoc\" @close=\"deleteModal = false\" :text=\"$t('confirm_delete')\"/>\n  </div>\n</template>\n<script>\nimport {TokenService} from \"../../../services/storage.service\";\nimport UsersService from \"../../management/users/users.service\";\nimport DepartmentService from \"../../management/department/department.service\";\nimport WareHaseService from \"../../wms/warehouse/warehouse.service\";\nimport SaleService from \"./sale.service\";\nimport ConfirmModal from \"../../../components/confirmModal\"\nimport CashBoxService from \"../../references/cashbox/cashbox.service\";\nimport ZReportService from \"./z-report.service\";\nimport PaymentService from \"../../references/payment/payment.service\";\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      userInfo: {},\n      saleList: [],\n      totalList: 0,\n      search1: '',\n      depList: [],\n      productList: [],\n      productInfo: {},\n      pagination: {\n        page: 1,\n        limit: 20\n      },\n      payload: {\n        page: 1,\n        limit: 20\n      },\n      totalItems: 0,\n      depId: '',\n      selected: '',\n      search: '',\n      itemId: '',\n      dynamicItem: {\n        count: 1,\n        salePrice: 0\n      },\n      saleform: {\n        cashboxId: null,\n        cashboxName: \"\",\n        comment: \"\",\n        contragentId: null,\n        contragentName: \"\",\n        fromDepartmentId: null,\n        fromDepartmentName: \"\",\n        regDate: \"\",\n        regNumber: \"\",\n        status: \"ACTIVE\",\n        toDepartmentId: null,\n        zetReportId: null,\n        toDepartmentName: \"\",\n        paymentTypeId: null,\n        ammount: 0,\n        totolCount: 0,\n        whItems:[],\n        paymentDtos: []\n      },\n      paymentDtos: {\n        ammount: 0,\n        id: 0,\n        paymentTypeId: 0,\n        paymentTypeName: \"\",\n        totolCount: 0\n      },\n      Zmodal: false,\n      CloseZmodal: false,\n      payment: false,\n      code: null,\n      zCode: 123,\n      itemsTotal: 0,\n      itemModel: false,\n      totalPorducts: 0,\n      totalSum: 0,\n      pendingModal: false,\n      docId: null,\n      suspendedList: [],\n      deleteModal: false,\n      beforePostModal: false,\n      beforePostForm: {\n        departmentId: '',\n        cashBoxId: ''\n      },\n      cashBox: [],\n      lol: {},\n      zForm: {\n        id: null,\n        cashboxId: null,\n        cashboxName: \"\",\n        departmentId: null,\n        departmentName: \"\",\n        end: \"\",\n        open: true,\n        start: \"\"\n      },\n      close_Z_Form: {\n        id: null,\n        cashboxId: null,\n        cashboxName: \"\",\n        departmentId: null,\n        departmentName: \"\",\n        end: \"\",\n        start: \"\"\n      },\n      checkedZetId: null,\n      paymentList: [],\n      depId1: '',\n      paymentAmount: ''\n    }\n  },\n  components: {\n    ConfirmModal\n  },\n  computed: {\n    calculate() {\n      return this.saleform.whItems.reduce((total, item) => {\n        return this.saleform.ammount = total + item.count * item.salePrice\n      }, 0)\n    },\n    calculateTotal() {\n      return  this.saleform.whItems.reduce((total, item) => {\n        return this.saleform.totolCount = total + item.count\n      }, 0)\n    },\n    itemsLength() {\n      this.totalItems = this.saleform.whItems.length\n    },\n    getDepartmentName() {\n      this.depList.forEach(dep => {\n        if(dep.id == TokenService.getDepartmentId()){\n          return this.lol = dep\n        }\n      })\n    },\n  },\n  watch: {\n    'search': {\n      handler(e) {\n        this.getItemsByDepId();\n      }\n    },\n    'paymentList': {\n      handler(e) {\n      },\n      deep: true\n    }\n  },\n  methods: {\n    getCashBoxById(depId1){\n      this.GetCashBoxList(depId1);\n    },\n    calculatePrice(payment, index) {\n      let sum = 0\n      this.paymentList.forEach(pay => {\n        pay.amount = parseFloat(pay.amount);\n        if (pay.amount)\n          sum += pay.amount\n      })\n      payment.amount = this.calculate - sum;\n      this.paymentAmount = payment.amount\n      this.$set(this.paymentList, index, payment);\n    },\n    getPaymentList() {\n      PaymentService.getPaymentList().then(res => {\n        this.paymentList = res.data\n        this.paymentList.forEach(pay => {\n          pay.amount = 0\n        })\n      })\n    },\n    getMore() {\n      this.pagination.page = this.pagination.page +1\n      this.depId = TokenService.getDepartmentId()\n      let list = {}\n      WareHaseService.getItemByDepIdAndSearch(this.depId, this.search, this.pagination).then(res => {\n        list = res.data.list\n        this.totalList = res.data.total\n        this.productList = Object.assign(this.productList.concat(list))\n      })\n    },\n    getCurrentUser() {\n      let user = TokenService.getUserInfo()\n      UsersService.getUsersById(user.id).then(res => {\n        this.userInfo = res.data\n      })\n    },\n    getItemsByDepId() {\n      this.depId = localStorage.getItem('dep_id')\n      WareHaseService.getItemByDepIdAndSearch(this.depId, this.search, this.pagination).then(res => {\n        this.productList = res.data.list\n        this.totalList = res.data.total\n      })\n    },\n    getSaleSuspended() {\n      let getSusForm = {}\n      getSusForm.cashboxId = localStorage.getItem('cashboxId')\n      getSusForm.departmentId = localStorage.getItem('dep_id')\n      SaleService.getSaleSuspendedList(getSusForm).then(res => {\n        this.saleList = res.data\n      }).catch(e => {\n        this.$vs.notification({\n          duration: 1000,\n          title: e.message,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    openPendingModal() {\n      this.pendingModal = true\n    },\n    async makePayment() {\n      await this.getPaymentList()\n      this.payment = true\n    },\n    addSaleList() {\n      if (this.dynamicItem.count > 0) {\n        if (this.itemId) {\n          let has = false,\n              ind = 0\n          this.saleform.whItems.forEach((whItem, index) => {\n            if (whItem.id === this.dynamicItem.id) {\n              if (whItem.remaining >= this.dynamicItem.count) {\n                has = true\n                ind = index\n              }\n            }\n          })\n          if (has) {\n            this.saleform.whItems.splice(ind, 1)\n            this.dynamicItem = {}\n            this.itemId = ''\n            this.itemModel = false\n            this.color = true\n          }\n          this.dynamicItem.salePrice =  +this.dynamicItem.salePrice\n          let item = Object.assign({}, this.dynamicItem)\n          if (item.remaining >= this.dynamicItem.count) {\n            this.saleform.whItems.unshift(item)\n            this.itemsTotal = this.saleform.whItems.length\n            this.itemModel = false\n            this.itemId = ''\n            this.dynamicItem.count = null\n            this.dynamicItem.salePrice = null\n          } else {\n            this.$vs.notification({\n              // title: this.$t('big-count'),\n              title: 'Item Id',\n              progress: 'auto',\n              duration: 1000,\n              color: 'danger',\n              position: 'top-right'\n            })\n          }\n        } else {\n          this.$vs.notification({\n            // title: this.$t('big-count'),\n            title: 'Item Id',\n            progress: 'auto',\n            duration: 1000,\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      } else {\n        this.$vs.notification({\n          // title: this.$t('big-count'),\n          title: 'Son kiritilmagan',\n          progress: 'auto',\n          duration: 1000,\n          color: 'danger',\n          position: 'top-right'\n        })\n      }\n    },\n    deleteDynamicItem(index) {\n      this.saleform.whItems.splice(index, 1)\n      this.itemsTotal--\n    },\n    createSaleForm() {\n      if (!this.Zmodal) {\n      SaleService.CreateEmptyDoc().then(res => {\n        this.saleform = {\n          whItems: [\n            {salePrice: null}\n          ]\n        }\n        this.saleform = res.data\n        this.saleform.fromDepartmentId = this.userInfo.departmentId\n        this.dynamicItem = {}\n        this.saleform.whItems = []\n        this.getItemsByDepId()\n        this.getSaleSuspended()\n      }).catch(e => {\n        this.$vs.notification({\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n      }\n    },\n    getItemDescription(con) {\n      this.productInfo = con\n      this.dynamicItem = this.productInfo\n      this.itemId = con.id\n      this.productInfo.count = 1\n      this.productInfo.salePrice = con.price\n      this.itemModel = true\n    },\n    makeEmpty() {\n      this.dynamicItem = {}\n      this.itemId = ''\n      this.dynamicItem.count = null\n      this.dynamicItem.salePrice = null\n    },\n    editSale(id) {\n      this.docId = id\n      SaleService.getSaleListById(this.docId).then(res => {\n        this.dynamicItem = {}\n        this.itemId = ''\n        this.saleform = {\n          ...res.data,\n          salePrice: res.data.whDocItems.salePrice,\n          whItems: res.data.whDocItems,\n          whDocItems: null\n        }\n        this.payment = true\n      }).catch(e => {\n        this.$vs.notification({\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    openDeleteModal(id) {\n      this.docId = null\n      this.docId = id\n      this.deleteModal = true\n    },\n    deleteSaleDoc() {\n      SaleService.deleteSaleDoc(this.docId).then(res => {\n        this.getSaleSuspended();\n        this.getItemsByDepId();\n        this.pendingModal = false\n        this.deleteModal = false\n        this.$vs.notification({\n          duration: 1000,\n          title: this.$t('success_deleted'),\n          progress: 'auto',\n          color: 'success',\n          position: 'top-right'\n        })\n      }).catch(e => {\n        this.$vs.notification({\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    clear() {\n      this.saleform.whItems = []\n      this.totalPorducts = 0\n      this.totalSum = 0\n      this.payment = false\n      this.itemsTotal = null\n    },\n    BeforePost() {\n      if(localStorage.getItem('cashboxId') === null && localStorage.getItem('dep_id') === null){\n        this.beforePostModal = true\n        this.checkZReport()\n        this.GetDepartmentList()\n        this.GetCashBoxList()\n      } else {\n        this.createSaleForm()\n        this.beforePostModal = false\n      }\n    },\n    goHome() {\n      this.$router.push({name: 'Dashboard'})\n    },\n    GetDepartmentList() {\n      DepartmentService.getDepByAccess().then(res => {\n        this.depList = res.data || []\n      })\n    },\n    GetCashBoxList() {\n      CashBoxService.getByDebId(this.depId1).then(res => {\n        this.cashBox = res.data || []\n      })\n    },\n    setBeforePostIdsToLocale() {\n      this.beforePostForm.departmentId = this.depId1\n      if(this.beforePostForm.cashBoxId && this.beforePostForm.departmentId) {\n        TokenService.saveCashBoxId(this.beforePostForm.cashBoxId)\n        TokenService.setDepartmentId(this.beforePostForm.departmentId)\n        this.createSaleForm()\n        this.getItemsByDepId()\n        this.beforePostModal = false\n      }\n      this.checkZReport()\n    },\n    closeZcode() {\n      if (this.zCode == this.code) {\n        this.zForm.cashboxId = localStorage.getItem('cashboxId')\n        this.zForm.departmentId = localStorage.getItem('dep_id')\n        ZReportService.CreateZ_Report(this.zForm).then(res => {\n          this.checkedZetId = res.data.id\n          this.createSaleForm()\n          this.Zmodal = false\n        })\n      }\n    },\n    checkZReport() {\n      ZReportService.CheckZetReport(localStorage.getItem('dep_id'), localStorage.getItem('cashboxId')).then(res => {\n        this.checkedZetId = res.data.id\n        if(res.data.open) {\n          this.createSaleForm()\n          this.Zmodal = false\n        } else {\n          this.Zmodal = true\n        }\n      })\n    },\n    closeZReport() {\n      this.close_Z_Form.cashboxId = localStorage.getItem('cashboxId')\n      this.close_Z_Form.departmentId = localStorage.getItem('dep_id')\n      this.close_Z_Form.id = this.checkedZetId\n      ZReportService.CloseZReport(this.close_Z_Form).then(res => {\n        this.CloseZmodal = false\n        this.checkZReport()\n        this.BeforePost()\n      }).catch(e => {\n        this.$vs.notification({\n          title: this.$t('post.z_report_close_error'),\n          type:'confirm',\n          color: 'dangir',\n          position: 'top-center',\n          duration: 2000\n        })\n      })\n    },\n    save(status) {\n      if(this.paymentDtos !== []) {\n        if(this.paymentAmount !== '') {\n          this.saleform.status = status\n          this.saleform.whDocItems = null\n          let tmp = true\n          if(status === 'READY') {\n            if(this.saleform.whItems.length > 0) {\n              tmp = true\n            } else {\n              tmp = false\n              this.$vs.notification({\n                title: this.$t('item_required_error'),\n                progress: 'auto',\n                type:'confirm',\n                duration: 1000,\n                color: 'danger',\n                position: 'top-right'\n              })\n            }\n          }\n          if(tmp) {\n            this.saleform.cashboxId = localStorage.getItem('cashboxId')\n            this.saleform.zetReportId = this.checkedZetId\n            this.saleform.paymentDtos = this.paymentList.map(e => {\n              return {\n                paymentTypeId:e.id,\n                amount:e.amount,\n                name:e.name\n              }\n            }).filter(e => e.amount && e.amount>0 )\n            parseInt(this.saleform.whItems.salePrice)\n            this.saleform.fromDepartmentId = this.lol.id\n            this.saleform.fromDepartmentName = this.lol.name\n            SaleService.saveSale(this.saleform).then(res => {\n              this.payment = false\n              this.createSaleForm()\n              this.clear()\n              this.$vs.notification({\n                title: this.$t('success_updated'),\n                progress: 'auto',\n                type:'confirm',\n                duration: 1500,\n                color: 'success',\n                position: 'top-right'\n              })\n            })\n          } else {\n            this.getSaleSuspended()\n          }\n\n        } else {\n          this.$vs.notification({\n            title: this.$t('payment_error'),\n            progress: 'auto',\n            duration: 1000,\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      } else {\n        this.$vs.notification({\n          title: this.$t('payment_error'),\n          progress: 'auto',\n          duration: 1000,\n          color: 'danger',\n          position: 'top-right'\n        })\n      }\n    },\n    /*saveSuspended(id) {\n      this.saleform.whDocItems = null\n      this.docId = id\n        this.saleform.status = 'READY'\n        SaleService.saveSale(this.saleform).then(res => {\n          this.payment = false\n          this.createSaleForm()\n          this.clear()\n          this.$vs.notification({\n            title: this.$t('success_updated'),\n            progress: 'auto',\n            duration: 1000,\n            color: 'success',\n            position: 'top-right'\n          })\n        })\n    },*/\n  },\n  beforeMount() {\n    this.BeforePost()\n  },\n  mounted() {\n    this.getCurrentUser();\n    this.getSaleSuspended();\n    this.GetDepartmentList()\n    this.getItemsByDepId()\n    this.checkZReport()\n  }\n}\n</script>\n\n<style scoped>\n.small {\n  font-size: 10px;\n  right: -180px;\n  top: -10px;\n}\n.desktop {\n  font-size: 10px;\n  right: -380px;\n  top: -12px;\n}\n</style>"]}]}