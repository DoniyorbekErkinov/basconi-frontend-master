{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\request\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\request\\index.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDb25maXJtTW9kYWwgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9jb25maXJtTW9kYWwudnVlIgppbXBvcnQgRGVwYXJ0bWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vbWFuYWdlbWVudC9kZXBhcnRtZW50L2RlcGFydG1lbnQuc2VydmljZSI7CmltcG9ydCBSZXF1ZXN0U2VydmljZSBmcm9tICIuL3JlcXVlc3Quc2VydmljZSI7CmltcG9ydCBXYXJlSGFzZVNlcnZpY2UgZnJvbSAiLi4vd2FyZWhvdXNlL3dhcmVob3VzZS5zZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW5kZXgiLAogIGNvbXBvbmVudHM6IHtDb25maXJtTW9kYWx9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3aW5kb3dXaWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgIHRyYW5zZmVyczogW10sCiAgICAgIHRvdGFsVHJhbnNmZXI6IDAsCiAgICAgIHBheWxvYWQ6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAyMAogICAgICB9LAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMTAwMDAwMAogICAgICB9LAogICAgICB0b3RhbEl0ZW06IDAsCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7bmFtZTogJ2lkJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLmluZGV4JyksIGZpZWxkOiAnaWQnfSwKICAgICAgICB7bmFtZTogJ3JlZ051bWJlcicsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5yZWdOdW1iZXInKSwgZmllbGQ6ICdyZWdOdW1iZXInfSwKICAgICAgICB7bmFtZTogJ3JlZ0RhdGUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MucmVnRGF0ZScpLCBmaWVsZDogJ3JlZ0RhdGUnfSwKICAgICAgICB7bmFtZTogJ2Zyb21EZXBhcnRtZW50TmFtZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5mcm9tX2RlcGFydG1lbnQnKSwgZmllbGQ6ICdmcm9tRGVwYXJ0bWVudE5hbWUnfSwKICAgICAgICB7bmFtZTogJ3RvRGVwYXJ0bWVudE5hbWUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MudG9fZGVwYXJ0bWVudCcpLCBmaWVsZDogJ3RvRGVwYXJ0bWVudE5hbWUnfSwKICAgICAgICB7bmFtZTogJ2NvbW1lbnQnLCBhbGlnbjogJ2NlbnRlcicsICBzdHlsZTogJ3dpZHRoOiAzMHB4JywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5jb21tZW50JyksIGZpZWxkOiAnY29tbWVudCd9LAogICAgICAgIHtuYW1lOiAnc3RhdHVzJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLnN0YXR1cycpLCBmaWVsZDogJ3N0YXR1cyd9LAogICAgICAgIHtuYW1lOiAnYWN0aW9ucycsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5hY3Rpb24nKSwgZmllbGQ6ICdhY3Rpb25zJ30KICAgICAgXSwKICAgICAgZHluYW1pY0l0ZW1Db2xzOiBbCiAgICAgICAge25hbWU6ICdpZCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLmluZGV4JyksIGZpZWxkOiAnaWQnfSwKICAgICAgICB7bmFtZTogJ2NrdScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnNrdScpLCBmaWVsZDogJ2l0ZW1Da3UnfSwKICAgICAgICB7bmFtZTogJ2JyYW5kTmFtZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLmJyYW5kJyksIGZpZWxkOiAnYnJhbmROYW1lJ30sCiAgICAgICAge25hbWU6ICdjYXRlZ29yeU5hbWUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5jYXRlZ29yeScpLCBmaWVsZDogJ2NhdGVnb3J5TmFtZSd9LAogICAgICAgIHtuYW1lOiAnc2l6ZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnNpemUnKSwgZmllbGQ6ICdzaXplT2xjaGFtJ30sCiAgICAgICAge25hbWU6ICdjb3VudCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLmNvdW50JyksIGZpZWxkOiAnY291bnQnfSwKICAgICAgICB7bmFtZTogJ3JlbWFpbmluZycsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnJlbWFpbmluZycpLCBmaWVsZDogJ3JlbWFpbmluZyd9LAogICAgICAgIC8vIHtuYW1lOiAnaW5jb21lUHJpY2UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5pbmNvbWVfcHJpY2UnKSwgZmllbGQ6ICdpbmNvbWVQcmljZSd9LAogICAgICAgIHtuYW1lOiAncHJpY2UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5wcmljZScpLCBmaWVsZDogJ3ByaWNlJ30sCiAgICAgICAge25hbWU6ICdhY3Rpb25zJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuYWN0aW9uJyksIGZpZWxkOiAnYWN0aW9ucyd9CiAgICAgIF0sCiAgICAgIHNlYXJjaDogJycsCiAgICAgIGNyZWF0ZTogdHJ1ZSwKICAgICAgY3JlYXRlRWRpdE1vZGFsOiBmYWxzZSwKICAgICAgZGVsZXRlTW9kYWw6IGZhbHNlLAogICAgICBkb2NJZDogbnVsbCwKICAgICAgZm9ybVRyYW5zZmVyOiB7CiAgICAgICAgZGVwYXJ0bWVudElkOiBudWxsLAogICAgICAgIHRvRGVwYXJ0bWVudElkOiAiIiwKICAgICAgICBmcm9tRGVwYXJ0bWVudElkOiAiIgogICAgICB9LAogICAgICBkZXBhcnRtZW50TGlzdDogW10sCiAgICAgIHdoSXRlbUxpc3Q6IFtdLAogICAgICBpdGVtSWQ6ICcnLAogICAgICBkeW5hbWljSXRlbToge30sCiAgICAgIGRlcElkOiAnJywKICAgICAgdGFiOiAnc2VuZCcsCiAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgbmFtZTogJycsCiAgICAgIHNlYXJjaDE6ICcnLAogICAgICBicmFuZHM6IFtdLAogICAgICBzZWFzb25zOiBbXSwKICAgICAgY2F0ZWdvcmllczpbXSwKICAgICAgY2F0ZWdvcnlJZCA6ICcnLAogICAgICBicmFuZElkIDogJycsCiAgICAgIHNlYXNvbnNJZCA6ICcnLAogICAgICB0cmFuc2ZlckJ5U29tZVN0dWZmTW9kZWw6IGZhbHNlLAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdzZWFyY2gnOiB7CiAgICAgIGhhbmRsZXIoZSkgewogICAgICAgIHRoaXMuZ2V0VHJhbnNmZXJEb2NzKCk7CiAgICAgIH0KICAgIH0sCiAgICAncGF5bG9hZC5wYWdlJzogewogICAgICBoYW5kbGVyKGUpIHsKICAgICAgICB0aGlzLmdldFRyYW5zZmVyRG9jcygpOwogICAgICB9CiAgICB9LAogICAgJ3RhYic6IHsKICAgICAgaGFuZGxlcih0KSB7CiAgICAgICAgdGhpcy5nZXRUcmFuc2ZlckRvY3MoMSk7CiAgICAgIH0KICAgIH0sCiAgICAnc2VhcmNoMSc6IHsKICAgICAgaGFuZGxlcihmKSB7CiAgICAgICAgdGhpcy5nZXRJdGVtcyh0aGlzLmRlcElkLCBmKQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbWF4VHJhbnNmZXIoKSB7CiAgICAgIGxldCBtYXggPSB0aGlzLnRvdGFsVHJhbnNmZXIgLyB0aGlzLnBheWxvYWQubGltaXQKICAgICAgcmV0dXJuIE1hdGguY2VpbChtYXgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYWdpbmF0ZShpdGVtc1BlclBhZ2UsIGN1cnJlbnRQYWdlLCBpbmRleCkgewogICAgICBjdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlIC0gMQogICAgICByZXR1cm4gaXRlbXNQZXJQYWdlICogY3VycmVudFBhZ2UgKyAoaW5kZXggKyAxKQogICAgfSwKICAgIGdldFRyYW5zZmVyRG9jcyhuKSB7CiAgICAgIGlmICh0aGlzLnRhYiA9PT0gJ3NlbmQnKSB7CiAgICAgICAgaWYgKG4gPT09IDEpCiAgICAgICAgICB0aGlzLnBheWxvYWQucGFnZSA9IG4KICAgICAgICBSZXF1ZXN0U2VydmljZS5nZXRTZW5kRG9jcyh0aGlzLnBheWxvYWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMudHJhbnNmZXJzID0gcmVzLmRhdGEubGlzdAogICAgICAgICAgdGhpcy50b3RhbFRyYW5zZmVyID0gcmVzLmRhdGEudG90YWwKICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYiA9PT0gJ3JlY2VpdmVkJykgewogICAgICAgIGlmIChuID09PSAxKQogICAgICAgICAgdGhpcy5wYXlsb2FkLnBhZ2UgPSBuCiAgICAgICAgUmVxdWVzdFNlcnZpY2UuZ2V0UmVjZWl2ZWREb2NzKHRoaXMucGF5bG9hZCkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy50cmFuc2ZlcnMgPSByZXMuZGF0YS5saXN0CiAgICAgICAgICB0aGlzLnRvdGFsVHJhbnNmZXIgPSByZXMuZGF0YS50b3RhbAogICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChuID09PSAxKQogICAgICAgICAgdGhpcy5wYXlsb2FkLnBhZ2UgPSBuCiAgICAgICAgUmVxdWVzdFNlcnZpY2UuZ2V0UGVuZGluZ0RvY3ModGhpcy5wYXlsb2FkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLnRyYW5zZmVycyA9IHJlcy5kYXRhLmxpc3QKICAgICAgICAgIHRoaXMudG90YWxUcmFuc2ZlciA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBnZXREZXBhcnRtZW50cygpIHsKICAgICAgRGVwYXJ0bWVudFNlcnZpY2UuZ2V0RGVwYXJ0bWVudHNMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXMuZGF0YQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBnZXRJdGVtcyhkZXBJZCwgc2VhcmNoMSkgewogICAgICBXYXJlSGFzZVNlcnZpY2UuZ2V0SXRlbUJ5RGVwSWRBbmRTZWFyY2goZGVwSWQsIHNlYXJjaDEsIHRoaXMucGFnaW5hdGlvbikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMud2hJdGVtTGlzdCA9IHJlcy5kYXRhLmxpc3QKICAgICAgICB0aGlzLnRvdGFsSXRlbSA9IHJlcy5kYXRhLnRvdGFsCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGNyZWF0ZUZvcm0oKSB7CiAgICAgIHRoaXMuZ2V0RGVwYXJ0bWVudHMoKQogICAgICBSZXF1ZXN0U2VydmljZS5jcmVhdGVUcmFuc2ZlckRvYygpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmZvcm1UcmFuc2ZlciA9IHt9CiAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIgPSByZXMuZGF0YQogICAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLmZyb21EZXBhcnRtZW50SWQgPSAnJwogICAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLnRvRGVwYXJ0bWVudElkID0gJycKICAgICAgICB0aGlzLmZvcm1UcmFuc2Zlci53aERvY0l0ZW1zID0gW10KICAgICAgICB0aGlzLmZvcm1UcmFuc2Zlci53aEl0ZW1zID0gW10KICAgICAgICB0aGlzLml0ZW1JZCA9ICcnCiAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgdGhpcy5jcmVhdGVFZGl0TW9kYWwgPSB0cnVlCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHZpZXdGb3JtKGRvY0lkKSB7CiAgICAgIGNvbnNvbGUubG9nKCdkJyxkb2NJZCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC93bXMvcmVxdWVzdC9yZXF1ZXN0LXZpZXcvJHtkb2NJZH1gKQogICAgfSwKICAgIGVkaXRGb3JtKGRvY0lkKSB7CiAgICAgIFJlcXVlc3RTZXJ2aWNlLmdldFRyYW5zZmVyRG9jQnlJZChkb2NJZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuaXRlbUlkID0gJycKICAgICAgICB0aGlzLmR5bmFtaWNJdGVtID0ge30KICAgICAgICB0aGlzLmZvcm1UcmFuc2ZlciA9IHJlcy5kYXRhCiAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcyA9IHJlcy5kYXRhLndoRG9jSXRlbXMKICAgICAgICB0aGlzLmNyZWF0ZUVkaXRNb2RhbCA9IHRydWUKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgZGVsZXRlRm9ybShpZCkgewogICAgICB0aGlzLmRvY0lkID0gbnVsbAogICAgICB0aGlzLmRvY0lkID0gaWQKICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IHRydWUKICAgIH0sCiAgICBkZWxldGVUcmFuc2ZlckRvYygpIHsKICAgICAgUmVxdWVzdFNlcnZpY2UuZGVsZXRlVHJhbnNmZXJEb2ModGhpcy5kb2NJZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ3N1Y2Nlc3NfZGVsZXRlZCcpLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICAgIHRoaXMuZ2V0VHJhbnNmZXJEb2NzKCk7CiAgICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IGZhbHNlCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGl0ZW1TZXQoaXRlbUlkKSB7CiAgICAgIHRoaXMud2hJdGVtTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmlkID09PSBpdGVtSWQpIHsKICAgICAgICAgIHRoaXMuZHluYW1pY0l0ZW0gPSBpdGVtCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdldEl0ZW1CeUlkKGRlcElkKXsKICAgICAgdGhpcy5pdGVtSWQgPSAnJzsKICAgICAgdGhpcy5nZXRJdGVtcyhkZXBJZCwgJycpOwogICAgICB0aGlzLmZvcm1UcmFuc2Zlci53aEl0ZW1zID0gW10KICAgIH0sCiAgICBhZGRUb1doTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuZHluYW1pY0l0ZW0uY291bnQgPiAwKSB7CiAgICAgICAgaWYodGhpcy5mb3JtVHJhbnNmZXIuZnJvbURlcGFydG1lbnRJZCAhPT0gdGhpcy5mb3JtVHJhbnNmZXIudG9EZXBhcnRtZW50SWQpIHsKICAgICAgICAgIGxldCBoYXMgPSBmYWxzZQogICAgICAgICAgbGV0IGluZCA9IDAKICAgICAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLndoSXRlbXMuZm9yRWFjaCgod2hJdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBpZiAod2hJdGVtLmlkID09PSB0aGlzLmR5bmFtaWNJdGVtLmlkKSB7CiAgICAgICAgICAgICAgaGFzID0gdHJ1ZQogICAgICAgICAgICAgIGluZCA9IGluZGV4CiAgICAgICAgICAgICAgaWYgKGhhcykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcy5zcGxpY2UoaW5kLCAxKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIGxldCBpdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5keW5hbWljSXRlbSkKICAgICAgICAgIGlmKGl0ZW0ucmVtYWluaW5nID49IHRoaXMuZHluYW1pY0l0ZW0uY291bnQpIHsKICAgICAgICAgICAgbGV0IHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pCiAgICAgICAgICAgIGlmICghdG1wLml0ZW1JZCkgewogICAgICAgICAgICAgIHRtcC5pdGVtSWQgPSB0bXAuaWQKICAgICAgICAgICAgICB0bXAuaWQgPSBudWxsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcy51bnNoaWZ0KHRtcCkKICAgICAgICAgICAgdGhpcy5nZXRJdGVtcyh0aGlzLmRlcElkLCcnKTsKICAgICAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgICAgIHRoaXMuaXRlbUlkID0gJycKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdiaWctY291bnQnKSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdzYW1lX2RlcGFydG1lbnQnKSwKICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnbm8tY291bnQnKSwKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBlZGl0RHluYW1pY0l0ZW0oaW5kZXgpIHsKICAgICAgaWYodGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgdGhpcy5pdGVtSWQgPSBpdGVtLmlkCiAgICAgICAgfSkKICAgICAgICB0aGlzLmZvcm1UcmFuc2Zlci53aEl0ZW1zLnNwbGljZShpbmRleCwgMSkKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUR5bmFtaWNJdGVtKGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLndoSXRlbXMuc3BsaWNlKGluZGV4LCAxKQogICAgfSwKICAgIHNhdmUoc3RhdHVzKSB7CiAgICAgIHRoaXMuJHJlZnMudHJhbnNmZXJGb3JtLnZhbGlkYXRlKCkudGhlbih2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmZvcm1UcmFuc2Zlci5zdGF0dXMgPSBzdGF0dXMKICAgICAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLndoRG9jSXRlbXMgPSBudWxsCiAgICAgICAgICBsZXQgdG1wID0gdHJ1ZQogICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ1JFQURZJykgewogICAgICAgICAgICBpZiAodGhpcy5mb3JtVHJhbnNmZXIud2hJdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdG1wID0gdHJ1ZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRtcCA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2l0ZW1fcmVxdWlyZWRfZXJyb3InKSwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0bXApIHsKICAgICAgICAgICAgdGhpcy5mb3JtVHJhbnNmZXIudG9EZXBhcnRtZW50SWQgPSB0aGlzLmRlcElkCiAgICAgICAgICAgIHRoaXMuZm9ybVRyYW5zZmVyLnN0YXR1cyA9ICJQRU5ESU5HIgogICAgICAgICAgICBSZXF1ZXN0U2VydmljZS5zYXZlVHJhbnNmZXJEb2ModGhpcy5mb3JtVHJhbnNmZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUVkaXRNb2RhbCA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy5nZXRUcmFuc2ZlckRvY3MoKTsKICAgICAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnc3VjY2Vzc191cGRhdGVkJyksCiAgICAgICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgICAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgncmVxdWlyZWRfZXJyb3InKSwKICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHZpZXdQZW5kaW5nRm9ybShpZCkgewogICAgICBjb25zb2xlLmxvZygnZGRkJywgaWQpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvd21zL3JlcXVlc3QvcmVxdWVzdC12aWV3LyR7aWR9YCkKICAgIH0sCgogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VHJhbnNmZXJEb2NzKCk7CgogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkTA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/modules/wms/request","sourcesContent":["<template>\n  <div>\n    <div class=\"q-gutter-y-sm\">\n      <q-table\n          v-if=\"windowWidth > 600\"\n          row-key=\"id\"\n          row=\"row\"\n          :data=\"transfers\"\n          class=\"shadow-10\"\n          :columns=\"columns\"\n          :hide-pagination=\"true\"\n          :rows-per-page-options=\"[0]\"\n      >\n        <template v-slot:top>\n          <div v-if=\"windowWidth > 600\" class=\"q-table__title\">\n            <span v-if=\"tab === 'send'\">{{ $t('wms.transfer.send') }}</span>\n            <span v-if=\"tab === 'received'\">{{ $t('wms.transfer.pending') }}</span>\n          </div>\n          <q-space v-if=\"windowWidth > 600\"/>\n          <div v-if=\"windowWidth < 600\" class=\"q-gutter-y-md  mb-1\" style=\"max-width: 300px;\">\n            <q-tabs v-model=\"tab\" inline-label outside-arrows mobile-arrows narrow-indicator active-color=\"primary\" class=\"text-primary mr-2\">\n              <q-tab :tab=\"tab\" name=\"send\" :label=\"$t('wms.transfer.send')\"></q-tab>\n              <q-tab :tab=\"tab\" name=\"received\" :label=\"$t('wms.transfer.pending')\"></q-tab>\n            </q-tabs>\n          </div>\n          <q-tabs v-else v-model=\"tab\" narrow-indicator active-color=\"primary\" class=\"text-primary mr-2\">\n            <q-tab :tab=\"tab\" name=\"send\" :label=\"$t('wms.transfer.send')\"></q-tab>\n            <q-tab :tab=\"tab\" name=\"received\" :label=\"$t('wms.transfer.pending')\"></q-tab>\n          </q-tabs>\n          <q-space v-if=\"windowWidth > 600\"/>\n\n          <q-space v-if=\"windowWidth < 600\"/>\n          <vs-button v-if=\"tab === 'send'\" success animation-type=\"rotate\" @click=\"createForm\">\n            <q-icon name=\"add\"/>\n            <template #animate>\n              <q-icon name=\"add\"/>\n            </template>\n          </vs-button>\n          <q-separator/>\n        </template>\n        <template v-slot:body-cell-id=\"props\">\n          <q-td class=\"text-center\">{{ paginate(payload.limit, payload.page, props.rowIndex) }}</q-td>\n        </template>\n        <template v-slot:body-cell-actions=\"props\">\n          <q-td class=\"text-center\">\n            <vs-button v-if=\"props.row.status === 'READY'\" style=\"display: inline-block\" flat icon dark @click=\"viewForm(props.row.id)\">\n              <q-icon name=\"visibility\"/>\n            </vs-button>\n            <vs-button v-if=\"props.row.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon primary @click=\"editForm(props.row.id)\">\n              <q-icon name=\"edit\"/>\n            </vs-button>\n            <vs-button v-if=\"props.row.status === 'PENDING'\" style=\"display: inline-block\" flat icon primary @click=\"viewPendingForm(props.row.id)\">\n              <q-icon name=\"edit\"/>\n            </vs-button>\n            <vs-button v-if=\"props.row.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon danger @click=\"deleteForm(props.row.id)\">\n              <q-icon name=\"delete\"/>\n            </vs-button>\n          </q-td>\n        </template>\n      </q-table>\n      <template v-if=\"windowWidth < 600\">\n        <q-toolbar>\n          <vs-row>\n            <vs-col class=\"mb-1 ml-1\" w=\"12\">\n              <q-tabs style=\"max-width: 300px;\" v-model=\"tab\" inline-label outside-arrows mobile-arrows narrow-indicator active-color=\"primary\" class=\"text-primary mr-2\">\n                <q-tab :tab=\"tab\" name=\"send\" :label=\"$t('wms.transfer.send')\"></q-tab>\n                <q-tab :tab=\"tab\" name=\"received\" :label=\"$t('wms.transfer.pending')\"></q-tab>\n              </q-tabs>\n            </vs-col>\n            <vs-button v-if=\"tab === 'send'\" success animation-type=\"rotate\" @click=\"createForm\">\n              <q-icon name=\"add\"/>\n              <template #animate>\n                <q-icon name=\"add\"/>\n              </template>\n            </vs-button>\n          </vs-row>\n        </q-toolbar>\n        <div class=\"ml-2 q-pa-xs col-xs-12 col-sm-6\" v-for=\"transfer in transfers\"\n             :key=\"transfer.id\">\n          <q-expansion-item\n              :label=\"transfer.regNumber\"\n              style=\"border-radius: 15px;\"\n              expand-icon-class=\"text-white\"\n              header-class=\"text-white\"\n              :header-class=\"transfer.status === 'READY' ? 'bg-green-13' : 'bg-yellow-5'\"\n              class=\"shadow-24 overflow-hidden mr-2\"\n          >\n            <q-card dense>\n              <q-card-section>\n                <q-list bordered separator dense>\n                  <q-item v-ripple>\n                    <q-item-section>\n                      <q-item-label>{{ $t('doc.regNumber') }}</q-item-label>\n                      <q-item-label><b>{{ transfer.regNumber }}</b></q-item-label>\n                    </q-item-section>\n                  </q-item>\n                  <q-item v-ripple>\n                    <q-item-section>\n                      <q-item-label>{{ $t('doc.regDate') }}</q-item-label>\n                      <q-item-label><b>{{ transfer.regDate }}</b></q-item-label>\n                    </q-item-section>\n                  </q-item>\n                  <q-item>\n                    <q-item-section>\n                      <q-item-label>{{ $t('doc.department') }}</q-item-label>\n                      <q-item-label><b>{{ transfer.toDepartmentName }}</b></q-item-label>\n                    </q-item-section>\n                  </q-item>\n                  <q-item>\n                    <q-item-section>\n                      <q-item-label>{{ $t('doc.contragent') }}</q-item-label>\n                      <q-item-label><b>{{ transfer.contragentName }}</b></q-item-label>\n                    </q-item-section>\n                  </q-item>\n                  <q-item>\n                    <q-item-section>\n                      <vs-row>\n                        <vs-col justify=\"center\" align=\"center\">\n                          <vs-button v-if=\"transfer.status === 'READY'\" style=\"display: inline-block\" flat icon dark @click=\"viewForm(transfer.id)\">\n                            <q-icon name=\"visibility\"/>\n                          </vs-button>\n                          <vs-button v-if=\"transfer.status === 'PENDING'\" style=\"display: inline-block\" flat icon primary @click=\"viewPendingForm(transfer.id)\">\n                            <q-icon name=\"edit\"/>\n                          </vs-button>\n                          <vs-button v-if=\"transfer.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon primary @click=\"editForm(transfer.id)\">\n                            <q-icon name=\"edit\"/>\n                          </vs-button>\n                          <vs-button v-if=\"transfer.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon danger @click=\"deleteForm(transfer.id)\">\n                            <q-icon name=\"delete\"/>\n                          </vs-button>\n                        </vs-col>\n                      </vs-row>\n                    </q-item-section>\n                  </q-item>\n\n                </q-list>\n              </q-card-section>\n            </q-card>\n          </q-expansion-item>\n        </div>\n      </template>\n      <div class=\"row justify-center q-mt-md\">\n        <q-pagination v-model=\"payload.page\" :max=\"maxTransfer\" :max-pages=\"4\" direction-links boundary-links push/>\n      </div>\n    </div>\n    <!--           Create / Edit           -->\n    <vs-dialog v-model=\"createEditModal\" blur prevent-close width=\"100%\">\n      <template #header>\n        <b v-if=\"create\">{{ $t('wms.new_transfer') }}</b>\n        <b v-else>{{ $t('wms.edit_transfer') }}</b>\n      </template>\n      <q-separator/>\n      <validation-observer ref=\"transferForm\" v-slot=\"{}\">\n        <vs-row>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"fromDepartmentId\">\n              <vs-select\n                  block\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :class=\"!valid ? 'required' : ''\"\n                  :label=\"$t('doc.from_department')\"\n                  v-model=\"formTransfer.fromDepartmentId\"\n                  :key=\"`departmentList-${departmentList.length}`\"\n              >\n                <vs-option-group>\n                  <div>{{ $t('doc.from_department') }}</div>\n                  <vs-option\n                      v-for=\"(dep, i) in departmentList\"\n                      :key=\"`departmentList-${i}`\"\n                      :label=\"dep.name\"\n                      :value=\"dep.id\">\n                    {{ dep.name }}\n                  </vs-option>\n                </vs-option-group>\n              </vs-select>\n            </validation-provider>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"toDepartmentId\">\n              <vs-select\n                  block\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.to_department')\"\n                  :class=\"!valid ? 'required' : ''\"\n                  v-model=\"depId\"\n                  @change=\"getItemById($event)\"\n                  :key=\"`toDepartmentList-${departmentList.length}`\"\n              >\n                <vs-option-group>\n                  <div>{{ $t('doc.to_department') }}</div>\n                  <vs-option v-for=\"(lol, i) in departmentList\" :key=\"`departmentList2-${i}`\" :label=\"lol.name\" :value=\"lol.id\"\n                             :disabled=\"formTransfer.fromDepartmentId == lol.id\">\n                    {{ lol.name }}\n                  </vs-option>\n                </vs-option-group>\n              </vs-select>\n            </validation-provider>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"regNumber\">\n              <vs-input\n                  state=\"primary\"\n                  block\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.regNumber')\"\n                  v-model=\"formTransfer.regNumber\"\n                  :class=\"!valid ? 'required' : ''\"\n              />\n            </validation-provider>\n          </vs-col>\n          <vs-col w=\"12\">\n            <validation-provider v-slot=\"{valid}\" name=\"comment\">\n              <vs-input\n                  state=\"primary\"\n                  block\n                  primary\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.comment')\"\n                  v-model=\"formTransfer.comment\"\n              />\n            </validation-provider>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-select\n                block\n                class=\"mt-3\"\n                v-model=\"itemId\"\n                @change=\"itemSet(itemId)\"\n                :label=\"$t('references.product')\"\n                :key=\"`a-${whItemList.length}`\"\n            >\n              <!--              <vs-option-group>-->\n              <vs-option v-for=\"(it, ind) in whItemList\" :key=\"`items-${ind}`\"\n                         :label=\"`${it.itemCku} /  ${it.sizeOlcham} - (${it.remaining})`\" :value=\"it.id\"\n                         :label-placeholder=\"`${it.itemCku} /  ${it.sizeOlcham} - (${it.remaining})`\" >\n                {{ it.itemCku }}  / {{ it.sizeOlcham }} - <b>({{it.remaining}})</b>\n              </vs-option>\n              <!--              </vs-option-group>-->\n            </vs-select>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-input state=\"primary\" block primary icon-after class=\"q-mr-lg mt-3\" v-model=\"search1\" :placeholder=\"$t('actions.search')\">\n              <template #icon>\n                <q-icon name=\"search\"/>\n              </template>\n            </vs-input>\n          </vs-col>\n          <vs-col v-if=\"itemId\" :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-input\n                state=\"primary\"\n                block\n                primary\n                class=\"mt-3\"\n                type=\"number\"\n                :label=\"$t('items.count')\"\n                v-model=\"dynamicItem.count\"\n            />\n          </vs-col>\n          <vs-row v-if=\"itemId\">\n            <vs-col w=\"12\" align=\"center\" class=\"mt-1\">\n              <vs-button flat @click=\"addToWhList\">{{ $t('actions.add') }}</vs-button>\n            </vs-col>\n          </vs-row>\n          <vs-row class=\"mt-2\">\n            <vs-col w=\"12\">\n              <q-table class=\"shadow-10\" dense row-key=\"id\" row=\"row\" :data=\"formTransfer.whItems\" :columns=\"dynamicItemCols\" :hide-pagination=\"true\" :rows-per-page-options=\"[0]\">\n                <template v-slot:body-cell-id=\"props\">\n                  <q-td class=\"text-center\">\n                    {{ props.rowIndex+1 }}\n                  </q-td>\n                </template>\n                <template v-slot:body-cell-actions=\"props\">\n                  <q-td class=\"text-center\">\n                    <vs-button @click=\"editDynamicItem(props.rowIndex, props.row)\" style=\"display: inline-block\" flat icon primary>\n                      <q-icon name=\"edit\"/>\n                    </vs-button>\n                    <vs-button @click=\"deleteDynamicItem(props.rowIndex)\" style=\"display: inline-block\" flat icon danger>\n                      <q-icon name=\"delete\"/>\n                    </vs-button>\n                  </q-td>\n                </template>\n              </q-table>\n            </vs-col>\n          </vs-row>\n        </vs-row>\n      </validation-observer>\n      <template #footer>\n        <vs-row>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button @click=\"save('SUSPENDED')\" :class=\"windowWidth > 600 ? 'mt-2 mr-1' : 'mt-1'\" block warn gradient>{{ $t('actions.save') }}</vs-button>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button @click=\"save('READY')\" :class=\"windowWidth > 600 ? 'mt-2 mr-1' : 'mt-1'\" block success gradient>{{ $t('actions.save_end_finish') }}</vs-button>\n          </vs-col>\n        </vs-row>\n      </template>\n    </vs-dialog>\n    <!--       Delete       -->\n    <confirm-modal :model=\"deleteModal\" @submit=\"deleteTransferDoc\" @close=\"deleteModal = false\" :text=\"$t('confirm_delete')\"/>\n  </div>\n</template>\n<script>\nimport ConfirmModal from \"../../../components/confirmModal.vue\"\nimport DepartmentService from \"../../management/department/department.service\";\nimport RequestService from \"./request.service\";\nimport WareHaseService from \"../warehouse/warehouse.service\";\n\nexport default {\n  name: \"index\",\n  components: {ConfirmModal},\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      transfers: [],\n      totalTransfer: 0,\n      payload: {\n        page: 1,\n        limit: 20\n      },\n      pagination: {\n        page: 1,\n        limit: 1000000\n      },\n      totalItem: 0,\n      columns: [\n        {name: 'id', align: 'center', label: this.$t('doc.index'), field: 'id'},\n        {name: 'regNumber', align: 'center', label: this.$t('doc.regNumber'), field: 'regNumber'},\n        {name: 'regDate', align: 'center', label: this.$t('doc.regDate'), field: 'regDate'},\n        {name: 'fromDepartmentName', align: 'center', label: this.$t('doc.from_department'), field: 'fromDepartmentName'},\n        {name: 'toDepartmentName', align: 'center', label: this.$t('doc.to_department'), field: 'toDepartmentName'},\n        {name: 'comment', align: 'center',  style: 'width: 30px', label: this.$t('doc.comment'), field: 'comment'},\n        {name: 'status', align: 'center', label: this.$t('doc.status'), field: 'status'},\n        {name: 'actions', align: 'center', label: this.$t('doc.action'), field: 'actions'}\n      ],\n      dynamicItemCols: [\n        {name: 'id', align: 'center', label: this.$t('items.index'), field: 'id'},\n        {name: 'cku', align: 'center', label: this.$t('items.sku'), field: 'itemCku'},\n        {name: 'brandName', align: 'center', label: this.$t('items.brand'), field: 'brandName'},\n        {name: 'categoryName', align: 'center', label: this.$t('items.category'), field: 'categoryName'},\n        {name: 'size', align: 'center', label: this.$t('items.size'), field: 'sizeOlcham'},\n        {name: 'count', align: 'center', label: this.$t('items.count'), field: 'count'},\n        {name: 'remaining', align: 'center', label: this.$t('items.remaining'), field: 'remaining'},\n        // {name: 'incomePrice', align: 'center', label: this.$t('items.income_price'), field: 'incomePrice'},\n        {name: 'price', align: 'center', label: this.$t('items.price'), field: 'price'},\n        {name: 'actions', align: 'center', label: this.$t('items.action'), field: 'actions'}\n      ],\n      search: '',\n      create: true,\n      createEditModal: false,\n      deleteModal: false,\n      docId: null,\n      formTransfer: {\n        departmentId: null,\n        toDepartmentId: \"\",\n        fromDepartmentId: \"\"\n      },\n      departmentList: [],\n      whItemList: [],\n      itemId: '',\n      dynamicItem: {},\n      depId: '',\n      tab: 'send',\n      active: true,\n      name: '',\n      search1: '',\n      brands: [],\n      seasons: [],\n      categories:[],\n      categoryId : '',\n      brandId : '',\n      seasonsId : '',\n      transferBySomeStuffModel: false,\n    }\n  },\n  watch: {\n    'search': {\n      handler(e) {\n        this.getTransferDocs();\n      }\n    },\n    'payload.page': {\n      handler(e) {\n        this.getTransferDocs();\n      }\n    },\n    'tab': {\n      handler(t) {\n        this.getTransferDocs(1);\n      }\n    },\n    'search1': {\n      handler(f) {\n        this.getItems(this.depId, f)\n      }\n    }\n  },\n  computed: {\n    maxTransfer() {\n      let max = this.totalTransfer / this.payload.limit\n      return Math.ceil(max)\n    }\n  },\n  methods: {\n    paginate(itemsPerPage, currentPage, index) {\n      currentPage = currentPage - 1\n      return itemsPerPage * currentPage + (index + 1)\n    },\n    getTransferDocs(n) {\n      if (this.tab === 'send') {\n        if (n === 1)\n          this.payload.page = n\n        RequestService.getSendDocs(this.payload).then(res => {\n          this.transfers = res.data.list\n          this.totalTransfer = res.data.total\n        }).catch(e => {\n          this.$vs.notification({\n            type:'confirm',\n            duration: 1000,\n            title: e.message,\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        })\n      } else if (this.tab === 'received') {\n        if (n === 1)\n          this.payload.page = n\n        RequestService.getReceivedDocs(this.payload).then(res => {\n          this.transfers = res.data.list\n          this.totalTransfer = res.data.total\n        }).catch(e => {\n          this.$vs.notification({\n            type:'confirm',\n            title: e.message,\n            duration: 1000,\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        })\n      } else {\n        if (n === 1)\n          this.payload.page = n\n        RequestService.getPendingDocs(this.payload).then(res => {\n          this.transfers = res.data.list\n          this.totalTransfer = res.data.total\n        }).catch(e => {\n          this.$vs.notification({\n            type:'confirm',\n            title: e.message,\n            duration: 1000,\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        })\n      }\n    },\n    getDepartments() {\n      DepartmentService.getDepartmentsList().then(res => {\n        this.departmentList = res.data\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    getItems(depId, search1) {\n      WareHaseService.getItemByDepIdAndSearch(depId, search1, this.pagination).then(res => {\n        this.whItemList = res.data.list\n        this.totalItem = res.data.total\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    createForm() {\n      this.getDepartments()\n      RequestService.createTransferDoc().then(res => {\n        this.formTransfer = {}\n        this.formTransfer = res.data\n        this.formTransfer.fromDepartmentId = ''\n        this.formTransfer.toDepartmentId = ''\n        this.formTransfer.whDocItems = []\n        this.formTransfer.whItems = []\n        this.itemId = ''\n        this.dynamicItem = {}\n        this.createEditModal = true\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    viewForm(docId) {\n      console.log('d',docId)\n      this.$router.push(`/wms/request/request-view/${docId}`)\n    },\n    editForm(docId) {\n      RequestService.getTransferDocById(docId).then(res => {\n        this.itemId = ''\n        this.dynamicItem = {}\n        this.formTransfer = res.data\n        this.formTransfer.whItems = res.data.whDocItems\n        this.createEditModal = true\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    deleteForm(id) {\n      this.docId = null\n      this.docId = id\n      this.deleteModal = true\n    },\n    deleteTransferDoc() {\n      RequestService.deleteTransferDoc(this.docId).then(res => {\n        this.$vs.notification({\n          type:'confirm',\n          duration: 1000,\n          title: this.$t('success_deleted'),\n          progress: 'auto',\n          color: 'success',\n          position: 'top-right'\n        })\n        this.getTransferDocs();\n        this.deleteModal = false\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    itemSet(itemId) {\n      this.whItemList.forEach(item => {\n        if (item.id === itemId) {\n          this.dynamicItem = item\n        }\n      })\n    },\n    getItemById(depId){\n      this.itemId = '';\n      this.getItems(depId, '');\n      this.formTransfer.whItems = []\n    },\n    addToWhList() {\n      if (this.dynamicItem.count > 0) {\n        if(this.formTransfer.fromDepartmentId !== this.formTransfer.toDepartmentId) {\n          let has = false\n          let ind = 0\n          this.formTransfer.whItems.forEach((whItem, index) => {\n            if (whItem.id === this.dynamicItem.id) {\n              has = true\n              ind = index\n              if (has) {\n                this.formTransfer.whItems.splice(ind, 1)\n              }\n            }\n          })\n          let item = Object.assign({}, this.dynamicItem)\n          if(item.remaining >= this.dynamicItem.count) {\n            let tmp = Object.assign({}, item)\n            if (!tmp.itemId) {\n              tmp.itemId = tmp.id\n              tmp.id = null\n            }\n            this.formTransfer.whItems.unshift(tmp)\n            this.getItems(this.depId,'');\n            this.dynamicItem = {}\n            this.itemId = ''\n          }\n          else {\n            this.$vs.notification({\n              type:'confirm',\n              title: this.$t('big-count'),\n              duration: 1000,\n              progress: 'auto',\n              color: 'danger',\n              position: 'top-right'\n            })\n          }\n        } else {\n          this.$vs.notification({\n            type:'confirm',\n            title: this.$t('same_department'),\n            progress: 'auto',\n            duration: 1000,\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      } else {\n        this.$vs.notification({\n          type:'confirm',\n          title: this.$t('no-count'),\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      }\n    },\n    editDynamicItem(index) {\n      if(this.formTransfer.whItems.length > 0) {\n        this.formTransfer.whItems.forEach(item => {\n          this.itemId = item.id\n        })\n        this.formTransfer.whItems.splice(index, 1)\n      }\n    },\n    deleteDynamicItem(index) {\n      this.formTransfer.whItems.splice(index, 1)\n    },\n    save(status) {\n      this.$refs.transferForm.validate().then(valid => {\n        if (valid) {\n          this.formTransfer.status = status\n          this.formTransfer.whDocItems = null\n          let tmp = true\n          if (status === 'READY') {\n            if (this.formTransfer.whItems.length > 0) {\n              tmp = true\n            } else {\n              tmp = false\n              this.$vs.notification({\n                type:'confirm',\n                title: this.$t('item_required_error'),\n                progress: 'auto',\n                duration: 1000,\n                color: 'danger',\n                position: 'top-right'\n              })\n            }\n          }\n          if (tmp) {\n            this.formTransfer.toDepartmentId = this.depId\n            this.formTransfer.status = \"PENDING\"\n            RequestService.saveTransferDoc(this.formTransfer).then(res => {\n              this.createEditModal = false\n              this.getTransferDocs();\n              this.$vs.notification({\n                type:'confirm',\n                title: this.$t('success_updated'),\n                progress: 'auto',\n                duration: 1000,\n                color: 'success',\n                position: 'top-right'\n              })\n            }).catch(e => {\n              type:'confirm',\n                  this.$vs.notification({\n                    title: e.message,\n                    duration: 1000,\n                    progress: 'auto',\n                    color: 'danger',\n                    position: 'top-right'\n                  })\n            })\n          }\n        } else {\n          this.$vs.notification({\n            type:'confirm',\n            duration: 1000,\n            title: this.$t('required_error'),\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      })\n    },\n    viewPendingForm(id) {\n      console.log('ddd', id)\n      this.$router.push(`/wms/request/request-view/${id}`)\n    },\n\n  },\n  async created() {\n    this.getTransferDocs();\n\n  }\n}\n</script>\n<style scoped>\n</style>\n"]}]}