{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\transfer\\nakladnoy.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\transfer\\nakladnoy.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUcmFuc2ZlclNlcnZpY2UgZnJvbSAiLi90cmFuc2Zlci5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJuYWtsYWRub3kiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3aW5kb3dXaWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgIGluY29tZToge30sCiAgICAgIHBlbmRpbmdGb3JtOiB7CiAgICAgICAgd2hJdGVtczogewogICAgICAgICAgY291bnQ6IG51bGwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7bmFtZTogJ2lkJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuaW5kZXgnKSwgZmllbGQ6ICdpZCd9LAogICAgICAgIC8vIHtuYW1lOiAnaXRlbU5hbWUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5uYW1lJyksIGZpZWxkOiAnaXRlbU5hbWUnfSwKICAgICAgICB7bmFtZTogJ2NrdScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnNrdScpLCBmaWVsZDogJ2NrdSd9LAogICAgICAgIHtuYW1lOiAnc2l6ZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnNpemUnKSwgZmllbGQ6ICdzaXplT2xjaGFtJ30sCiAgICAgICAge25hbWU6ICdwcmljZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnByaWNlJyksIGZpZWxkOiAncHJpY2UnfSwKICAgICAgICB7bmFtZTogJ2NvdW50JywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuY291bnQnKSwgZmllbGQ6ICdjb3VudCd9LAogICAgICAgIHtuYW1lOiAnYWN0aW9ucycsIGFsaWduOiAnY2VudGVyJywgc3R5bGU6ICdtYXgtd2lkdGg6IDQwcHgnLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuYWN0aW9uJyksIGZpZWxkOiAnYWN0aW9ucyd9CiAgICAgIF0sCiAgICAgIHZpc2libGVDb2x1bW5zOiBbICdpZCcsICdja3UnLCAnc2l6ZScsICdjb3VudCcsICdhY3Rpb25zJ10sCiAgICAgIHZpc2libGVDb2x1bW5zMjogWyAnaWQnLCAnY2t1JywgJ3NpemUnLCAnY291bnQnXSwKICAgICAgZHluYW1pYzogewogICAgICAgIGNvdW50OiBbXQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgcHJpbnQoKSB7CiAgICAgIHdpbmRvdy5wcmludCgpOwogICAgfSwKICAgIGdvQmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQogICAgfSwKICAgIHNhdmUoc3RhdHVzKSB7CiAgICAgIHRoaXMuJHJlZnMucGVuZGluZ1RvUmVhZHlGb3JtLnZhbGlkYXRlKCkudGhlbih2YWxpZCA9PiB7CiAgICAgICAgaWYodmFsaWQpIHsKICAgICAgICAgIGlmKHRoaXMucGVuZGluZ0Zvcm0ud2hJdGVtcyAhPT0gW10pIHsKICAgICAgICAgICAgdGhpcy5wZW5kaW5nRm9ybSA9IHRoaXMuaW5jb21lCiAgICAgICAgICAgIHRoaXMucGVuZGluZ0Zvcm0uc3RhdHVzID0gc3RhdHVzCiAgICAgICAgICAgIHRoaXMucGVuZGluZ0Zvcm0ud2hJdGVtcyA9IHRoaXMuaW5jb21lLndoRG9jSXRlbXMKICAgICAgICAgICAgdGhpcy5wZW5kaW5nRm9ybS53aERvY0l0ZW1zID0gdGhpcy5pbmNvbWUud2hEb2NJdGVtcwogICAgICAgICAgICB0aGlzLnBlbmRpbmdGb3JtLndoRG9jSXRlbXMgPSBbXQogICAgICAgICAgICBUcmFuc2ZlclNlcnZpY2Uuc2F2ZUluY29tZVRyYW5zZmVyRG9jKHRoaXMucGVuZGluZ0Zvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIFRyYW5zZmVyU2VydmljZS5nZXRUcmFuc2ZlckRvY0J5SWQodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMuaW5jb21lID0gcmVzLmRhdGEKICAgIH0pLmNhdGNoKGUgPT4gewogICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgIH0pCiAgICB9KQogIH0KfQo="},{"version":3,"sources":["nakladnoy.vue"],"names":[],"mappings":";AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nakladnoy.vue","sourceRoot":"src/modules/wms/transfer","sourcesContent":["<template>\n  <q-card class=\"shadow-24\">\n    <q-toolbar>\n      <vs-button @click=\"goBack\" icon flat primary><q-icon name=\"arrow_back\"/></vs-button>\n      <q-toolbar-title v-if=\"windowWidth > 600\">\n        {{ $t('doc.regNumber') }} - {{ income.regNumber }}\n      </q-toolbar-title>\n      <q-space v-if=\"windowWidth < 600\"/>\n      <vs-button v-if=\"income.status === 'PENDING'\" @click=\"save('READY')\" style=\"width: 150px\" block success gradient flat>Save</vs-button>\n<!--      <vs-button v-if=\"income.status !== 'PENDING'\" @click=\"print\" icon flat dark><q-icon name=\"print\"/></vs-button>-->\n    </q-toolbar>\n    <vs-row>\n      <vs-col v-if=\"windowWidth < 600\" class=\"mt-2\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.regNumber') }}:</b> {{ income.regNumber }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.regDate') }}:</b> {{ income.regDate }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.from_department') }}:</b> {{ income.fromDepartmentName }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.to_department') }}:</b> {{ income.toDepartmentName }}\n      </vs-col>\n    </vs-row>\n    <q-table :data=\"income.whDocItems\" :columns=\"columns\" row=\"row\" row-key=\"id\" :visible-columns=\"income.status === 'PENDING' ? visibleColumns : visibleColumns2\"  hide-pagination :rows-per-page-options=\"[0]\" class=\"mt-2\">\n      <template v-slot:body-cell-id=\"props\">\n        <q-td class=\"text-center\">{{ props.rowIndex + 1 }}</q-td>\n      </template>\n      <template v-if=\"income.status === 'PENDING'\" v-slot:body-cell-actions=\"props\">\n        <q-td style=\"max-width: 70px;\">\n          <validation-observer ref=\"pendingToReadyForm\" v-slot=\"{}\">\n            <validation-provider rules=\"required\" v-slot=\"{valid}\">\n              <vs-row align=\"flex-end\">\n                <vs-col>\n                  <vs-input\n                    block\n                    state=\"primary\"\n                    type=\"number\"\n                    :danger=\"valid\"\n                    :class=\"!valid ? 'required' : ''\"\n                    v-model=\"pendingForm.whItems[props.rowIndex]\"\n                  />\n                </vs-col>\n              </vs-row>\n            </validation-provider>\n          </validation-observer>\n        </q-td>\n      </template>\n    </q-table>\n  </q-card>\n</template>\n\n<script>\nimport TransferService from \"./transfer.service\";\nexport default {\n  name: \"nakladnoy\",\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      income: {},\n      pendingForm: {\n        whItems: {\n          count: null\n        }\n      },\n      columns: [\n        {name: 'id', align: 'center', label: this.$t('items.index'), field: 'id'},\n        // {name: 'itemName', align: 'center', label: this.$t('items.name'), field: 'itemName'},\n        {name: 'cku', align: 'center', label: this.$t('items.sku'), field: 'cku'},\n        {name: 'size', align: 'center', label: this.$t('items.size'), field: 'sizeOlcham'},\n        {name: 'price', align: 'center', label: this.$t('items.price'), field: 'price'},\n        {name: 'count', align: 'center', label: this.$t('items.count'), field: 'count'},\n        {name: 'actions', align: 'center', style: 'max-width: 40px', label: this.$t('items.action'), field: 'actions'}\n      ],\n      visibleColumns: [ 'id', 'cku', 'size', 'count', 'actions'],\n      visibleColumns2: [ 'id', 'cku', 'size', 'count'],\n      dynamic: {\n        count: []\n      }\n    }\n  },\n  watch: {},\n  methods: {\n    print() {\n      window.print();\n    },\n    goBack() {\n      this.$router.go(-1)\n    },\n    save(status) {\n      this.$refs.pendingToReadyForm.validate().then(valid => {\n        if(valid) {\n          if(this.pendingForm.whItems !== []) {\n            this.pendingForm = this.income\n            this.pendingForm.status = status\n            this.pendingForm.whItems = this.income.whDocItems\n            this.pendingForm.whDocItems = this.income.whDocItems\n            this.pendingForm.whDocItems = []\n            TransferService.saveIncomeTransferDoc(this.pendingForm).then(res => {\n              this.$router.go(-1)\n            })\n          }\n        }\n      })\n    }\n  },\n  created() {\n    TransferService.getTransferDocById(this.$route.params.id).then(res => {\n      this.income = res.data\n    }).catch(e => {\n      this.$vs.notification({\n        type:'confirm',\n        title: e.message,\n        progress: 'auto',\n        color: 'danger',\n        position: 'top-right'\n      })\n    })\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}