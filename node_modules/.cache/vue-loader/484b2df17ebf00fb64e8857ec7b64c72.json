{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\references\\cashbox\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\references\\cashbox\\index.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEZXBhcnRtZW50U2VydmljZSBmcm9tICIuLi8uLi9tYW5hZ2VtZW50L2RlcGFydG1lbnQvZGVwYXJ0bWVudC5zZXJ2aWNlIjsKaW1wb3J0IENhc2hCb3hTZXJ2aWNlIGZyb20gIi4vY2FzaGJveC5zZXJ2aWNlIjsKaW1wb3J0IENvbmZpcm1Nb2RhbCBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL2NvbmZpcm1Nb2RhbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY2FzaGJveCIsCiAgY29tcG9uZW50czoge0NvbmZpcm1Nb2RhbH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpbmRvd1dpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgY3JlYXRlOiB0cnVlLAogICAgICBjcmVhdGVNb2RhbDogZmFsc2UsCiAgICAgIGRlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgY2FzaEJveExpc3Q6IFtdLAogICAgICBjb2x1bW5zOiBbCiAgICAgICAge25hbWU6ICdpZCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6ICfihJYnLCBmaWVsZDogJ2lkJ30sCiAgICAgICAge25hbWU6ICduYW1lJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnbWFuYWdlbWVudC5jYXNoX2JveCcpLCBmaWVsZDogJ25hbWUnfSwKICAgICAgICB7bmFtZTogJ2RlcGFydG1lbnROYW1lJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLmRlcGFydG1lbnQnKSwgZmllbGQ6ICdkZXBhcnRtZW50TmFtZSd9LAogICAgICAgIC8vIHtuYW1lOiAnaXBBZGRyZXNzJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLmlwX2FkZHJlc3MnKSwgZmllbGQ6ICdpcEFkZHJlc3MnfSwKICAgICAgICB7bmFtZTogJ3N0YXR1cycsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5zdGF0dXMnKSwgZmllbGQ6ICdzdGF0dXMnfSwKICAgICAgICB7bmFtZTogJ2FjdGlvbicsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5hY3Rpb24nKSwgZmllbGQ6ICdhY3Rpb24nfSwKICAgICAgXSwKICAgICAgZm9ybTogewoKICAgICAgICAvLyBpcEFkZHJlc3M6ICcnCiAgICAgIH0sCiAgICAgIG5hbWU6ICcnLAogICAgICBkZXBhcnRtZW50SWQ6ICcnLAogICAgICBkZWxldGVNb2RhbDogZmFsc2UsCiAgICAgIGNhc2hCb3hJZDogbnVsbAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENhc2hCb3hsaXN0KCkgewogICAgICBDYXNoQm94U2VydmljZS5nZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuY2FzaEJveExpc3QgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIGdldERlcExpc3QoKXsKICAgICAgRGVwYXJ0bWVudFNlcnZpY2UuZ2V0RGVwYXJ0bWVudHNMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSBbXQogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIGNyZWF0ZUZvcm0oKSB7CiAgICAgIHRoaXMuY3JlYXRlID0gdHJ1ZQogICAgICB0aGlzLmdldERlcExpc3QoKQogICAgICB0aGlzLmNyZWF0ZU1vZGFsID0gdHJ1ZQogICAgfSwKICAgIGVkaXRGb3JtKGl0ZW0pIHsKICAgICAgdGhpcy5jcmVhdGUgPSBmYWxzZQogICAgICB0aGlzLmZvcm0gPSBpdGVtCiAgICAgIHRoaXMuZ2V0RGVwTGlzdCgpCiAgICAgIHRoaXMuY3JlYXRlTW9kYWwgPSB0cnVlCiAgICB9LAogICAgc2F2ZShzdGF0dXMpIHsKICAgICAgdGhpcy5mb3JtLnN0YXR1cyA9IHN0YXR1cwogICAgICB0aGlzLmZvcm0ubmFtZSA9IHRoaXMubmFtZQogICAgICB0aGlzLmZvcm0uZGVwYXJ0bWVudElkID0gdGhpcy5kZXBhcnRtZW50SWQKICAgICAgaWYodGhpcy5jcmVhdGUpIHsKICAgICAgICBDYXNoQm94U2VydmljZS5jcmVhdGVDYXNoYm94KHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5nZXRDYXNoQm94bGlzdCgpCiAgICAgICAgICB0aGlzLmRlcGFydG1lbnRMaXN0PVtdCiAgICAgICAgICB0aGlzLmRlcGFydG1lbnRJZCA9ICcnCiAgICAgICAgICB0aGlzLm5hbWUgPSAnJwogICAgICAgICAgdGhpcy5nZXREZXBMaXN0KCkKICAgICAgICAgIHRoaXMuY3JlYXRlTW9kYWwgPSBmYWxzZQogICAgICAgICAgdGhpcy5mb3JtID0ge30KICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIENhc2hCb3hTZXJ2aWNlLnVwZGF0ZUNhc2hib3godGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmdldENhc2hCb3hsaXN0KCkKICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3Q9W10KICAgICAgICAgIHRoaXMuZ2V0RGVwTGlzdCgpCiAgICAgICAgICB0aGlzLmZvcm0gPSB7fQogICAgICAgICAgdGhpcy5mb3JtLmRlcGFydG1lbnRJZCA9ICcnCiAgICAgICAgICB0aGlzLm5hbWUgPSAnJwogICAgICAgICAgdGhpcy5jcmVhdGVNb2RhbCA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZU1vZGFsVHJ1ZShpZCkgewogICAgICB0aGlzLmNhc2hCb3hJZCA9IGlkCiAgICAgIHRoaXMuZGVsZXRlTW9kYWwgPSB0cnVlCiAgICB9LAogICAgZGVsZXRlQ2FzaEJveCgpIHsKICAgICAgQ2FzaEJveFNlcnZpY2UuZGVsZXRlQ2FzaGJveCh0aGlzLmNhc2hCb3hJZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVsZXRlTW9kYWwgPSBmYWxzZQogICAgICAgIHRoaXMuZ2V0Q2FzaEJveGxpc3QoKTsKICAgICAgfSkKICAgIH0KICB9LAogIHdhdGNoOiB7CgoKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhc2hCb3hsaXN0KCkKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/modules/references/cashbox","sourcesContent":["<template>\n  <div>\n    <q-table\n      :title=\"$t('management.cash_box')\"\n      row=\"row\"\n      :columns=\"columns\"\n      :data=\"cashBoxList\"\n      row-key=\"id\"\n      :hide-pagination=\"true\"\n      :rows-per-page-options=\"[0]\"\n    >\n      <template v-slot:top-right>\n        <vs-button success animation-type=\"rotate\" @click=\"createForm\">\n          <q-icon name=\"add\"/>\n          <template #animate>\n            <q-icon name=\"add\"/>\n          </template>\n        </vs-button>\n      </template>\n      <template v-slot:body-cell-id=\"props\">\n        <q-td class=\"text-center\">{{ props.rowIndex + 1 }}</q-td>\n      </template>\n      <template v-slot:body-cell-action=\"props\">\n        <q-td class=\"text-center\">\n          <vs-button style=\"display: inline-block\" flat icon primary @click=\"editForm(props.row)\">\n            <q-icon name=\"edit\"/>\n          </vs-button>\n          <vs-button  style=\"display: inline-block\" flat icon danger @click=\"deleteModalTrue(props.row.id)\">\n            <q-icon name=\"delete\"/>\n          </vs-button>\n        </q-td>\n      </template>\n    </q-table>\n    <!--    Create / Edit    -->\n    <vs-dialog blur prevent-close v-model=\"createModal\">\n      <template #header>\n        <b v-if=\"create\">{{ $t('management.cash_box_create') }}</b>\n        <b v-else>{{ $t('management.cash_box_edit') }}</b>\n      </template>\n      <q-separator/>\n      <vs-input\n          state=\"primary\"\n      block class=\"mt-3\"\n      label=\"Nomi\"\n      v-model=\"name\"/>\n      <vs-select\n        block\n        class=\"mt-3\"\n        v-model=\"departmentId\"\n        :key=\"`departmentList-${departmentList.length}`\"\n        :label=\"$t('management.department')\"\n      >\n          <vs-option v-for=\"(dep, i) in departmentList\" :key=\"`dep-${i}`\" :label=\"dep.name\" :value=\"dep.id\">\n            {{ dep.name }}\n          </vs-option>\n      </vs-select>\n      <template #footer>\n        <vs-button class=\"mt-2\" block primary gradient @click=\"save('ACTIVE')\">{{ $t('actions.save') }}</vs-button>\n      </template>\n    </vs-dialog>\n    <!--           Delete          -->\n    <confirm-modal :model=\"deleteModal\" @submit=\"deleteCashBox\" @close=\"deleteModal = false\" :text=\"$t('confirm_delete')\"/>\n  </div>\n</template>\n\n<script>\nimport DepartmentService from \"../../management/department/department.service\";\nimport CashBoxService from \"./cashbox.service\";\nimport ConfirmModal from \"../../../components/confirmModal\";\nexport default {\n  name: \"cashbox\",\n  components: {ConfirmModal},\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      create: true,\n      createModal: false,\n      departmentList: [],\n      cashBoxList: [],\n      columns: [\n        {name: 'id', align: 'center', label: 'â„–', field: 'id'},\n        {name: 'name', align: 'center', label: this.$t('management.cash_box'), field: 'name'},\n        {name: 'departmentName', align: 'center', label: this.$t('doc.department'), field: 'departmentName'},\n        // {name: 'ipAddress', align: 'center', label: this.$t('doc.ip_address'), field: 'ipAddress'},\n        {name: 'status', align: 'center', label: this.$t('doc.status'), field: 'status'},\n        {name: 'action', align: 'center', label: this.$t('doc.action'), field: 'action'},\n      ],\n      form: {\n\n        // ipAddress: ''\n      },\n      name: '',\n      departmentId: '',\n      deleteModal: false,\n      cashBoxId: null\n    }\n  },\n  computed: {\n  },\n  methods: {\n    getCashBoxlist() {\n      CashBoxService.getList().then(res => {\n        this.cashBoxList = res.data\n      })\n    },\n    getDepList(){\n      DepartmentService.getDepartmentsList().then(res => {\n        this.departmentList = []\n        this.departmentList = res.data\n      })\n    },\n    createForm() {\n      this.create = true\n      this.getDepList()\n      this.createModal = true\n    },\n    editForm(item) {\n      this.create = false\n      this.form = item\n      this.getDepList()\n      this.createModal = true\n    },\n    save(status) {\n      this.form.status = status\n      this.form.name = this.name\n      this.form.departmentId = this.departmentId\n      if(this.create) {\n        CashBoxService.createCashbox(this.form).then(res => {\n          this.getCashBoxlist()\n          this.departmentList=[]\n          this.departmentId = ''\n          this.name = ''\n          this.getDepList()\n          this.createModal = false\n          this.form = {}\n        })\n      } else {\n        CashBoxService.updateCashbox(this.form).then(res => {\n          this.getCashBoxlist()\n          this.departmentList=[]\n          this.getDepList()\n          this.form = {}\n          this.form.departmentId = ''\n          this.name = ''\n          this.createModal = false\n        })\n      }\n    },\n    deleteModalTrue(id) {\n      this.cashBoxId = id\n      this.deleteModal = true\n    },\n    deleteCashBox() {\n      CashBoxService.deleteCashbox(this.cashBoxId).then(res => {\n        this.deleteModal = false\n        this.getCashBoxlist();\n      })\n    }\n  },\n  watch: {\n\n\n  },\n  created() {\n    this.getCashBoxlist()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}