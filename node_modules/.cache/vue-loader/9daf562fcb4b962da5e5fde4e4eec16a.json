{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\income\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\income\\index.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDb25maXJtTW9kYWwgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9jb25maXJtTW9kYWwudnVlIgppbXBvcnQgRGVwYXJ0bWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vbWFuYWdlbWVudC9kZXBhcnRtZW50L2RlcGFydG1lbnQuc2VydmljZSI7CmltcG9ydCBDb250cmFnZW50U2VydmljZSBmcm9tICIuLi8uLi9yZWZlcmVuY2VzL2NvbnRyYWdlbnQvY29udHJhZ2VudC5zZXJ2aWUiOwppbXBvcnQgSW5jb21lU2VydmljZSBmcm9tICIuL2luY29tZS5zZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3RTZXJ2aWNlIGZyb20gIi4uLy4uL3JlZmVyZW5jZXMvcHJvZHVjdC9wcm9kdWN0LnNlcnZpY2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgY29tcG9uZW50czoge0NvbmZpcm1Nb2RhbH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpbmRvd1dpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgaW5jb21lczogW10sCiAgICAgIHRvdGFsSW5jb21lOiAwLAogICAgICBwYXlsb2FkOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAKICAgICAgfSwKICAgICAgY29sdW1uczogWwogICAgICAgIHtuYW1lOiAnaWQnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MuaW5kZXgnKSwgZmllbGQ6ICdpZCd9LAogICAgICAgIHtuYW1lOiAncmVnTnVtYmVyJywgYWxpZ246ICdsZWZ0JywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5yZWdOdW1iZXInKSwgZmllbGQ6ICdyZWdOdW1iZXInfSwKICAgICAgICB7bmFtZTogJ3JlZ0RhdGUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MucmVnRGF0ZScpLCBmaWVsZDogJ3JlZ0RhdGUnfSwKICAgICAgICB7bmFtZTogJ3RvRGVwYXJ0bWVudE5hbWUnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdkb2MuZGVwYXJ0bWVudCcpLCBmaWVsZDogJ3RvRGVwYXJ0bWVudE5hbWUnfSwKICAgICAgICB7bmFtZTogJ2NvbnRyYWdlbnROYW1lJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLmNvbnRyYWdlbnQnKSwgZmllbGQ6ICdjb250cmFnZW50TmFtZSd9LAogICAgICAgIHtuYW1lOiAnc3RhdHVzJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnZG9jLnN0YXR1cycpLCBmaWVsZDogJ3N0YXR1cyd9LAogICAgICAgIHtuYW1lOiAnYWN0aW9ucycsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2RvYy5hY3Rpb24nKSwgZmllbGQ6ICdhY3Rpb25zJ30KICAgICAgXSwKICAgICAgdmlzaWJsZUNvbHVtbnM6IFsncmVnTnVtYmVyJywgJ3JlZ0RhdGUnLCAndG9EZXBhcnRtZW50TmFtZScsICdjb250cmFnZW50TmFtZScsJ3N0YXR1cyddLAogICAgICB2aXNpYmxlQ29sdW1uOiBbJ2lkJywncmVnTnVtYmVyJywgJ3JlZ0RhdGUnLCAndG9EZXBhcnRtZW50TmFtZScsICdjb250cmFnZW50TmFtZScsJ3N0YXR1cycsJ2FjdGlvbnMnXSwKICAgICAgZHluYW1pY0l0ZW1Db2xzOiBbCiAgICAgICAge25hbWU6ICdpZCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLmluZGV4JyksIGZpZWxkOiAnaWQnfSwKICAgICAgICB7bmFtZTogJ2NrdScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLnNrdScpLCBmaWVsZDogJ2NrdSd9LAogICAgICAgIC8vIHtuYW1lOiAnbmFtZScsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLm5hbWUnKSwgZmllbGQ6ICduYW1lJ30sCiAgICAgICAge25hbWU6ICdzaXplJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuc2l6ZScpLCBmaWVsZDogJ3NpemVPbGNoYW0nfSwKICAgICAgICB7bmFtZTogJ2NvdW50JywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuY291bnQnKSwgZmllbGQ6ICdjb3VudCd9LAogICAgICAgIHtuYW1lOiAnaW5jb21lUHJpY2UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5pbmNvbWVfcHJpY2UnKSwgZmllbGQ6ICdpbmNvbWVQcmljZSd9LAogICAgICAgIHtuYW1lOiAncHJpY2UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5wcmljZScpLCBmaWVsZDogJ3ByaWNlJ30sCiAgICAgICAge25hbWU6ICdhY3Rpb25zJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuYWN0aW9uJyksIGZpZWxkOiAnYWN0aW9ucyd9CiAgICAgIF0sCiAgICAgIHNlYXJjaDogJycsCiAgICAgIHNlYXJjaDE6ICcnLAogICAgICBjcmVhdGU6IHRydWUsCiAgICAgIGNyZWF0ZUVkaXRNb2RhbDogZmFsc2UsCiAgICAgIGRlbGV0ZU1vZGFsOiBmYWxzZSwKICAgICAgZG9jSWQ6IG51bGwsCiAgICAgIGZvcm1JbmNvbWU6IHt9LAogICAgICBkZXBhcnRtZW50TGlzdDogW10sCiAgICAgIGNvbnRyYWdlbnRMaXN0OiBbXSwKICAgICAgaXRlbUxpc3Q6IFtdLAogICAgICBpdGVtSWQ6ICcnLAogICAgICBkeW5hbWljSXRlbToge30KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnc2VhcmNoJzogewogICAgICBoYW5kbGVyKGUpIHsKICAgICAgICB0aGlzLmdldEluY29tZURvY3MoKTsKICAgICAgfQogICAgfSwKICAgICdwYXlsb2FkLnBhZ2UnOiB7CiAgICAgIGhhbmRsZXIoZSkgewogICAgICAgIHRoaXMuZ2V0SW5jb21lRG9jcygpOwogICAgICB9CiAgICB9LAogICAgJ3NlYXJjaDEnOiB7CiAgICAgIGhhbmRsZXIoZSkgewogICAgICAgIHRoaXMuZ2V0SXRlbXMoZSkKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG1heEluY29tZSgpIHsKICAgICAgbGV0IG1heCA9IHRoaXMudG90YWxJbmNvbWUgLyB0aGlzLnBheWxvYWQubGltaXQKICAgICAgcmV0dXJuIE1hdGguY2VpbChtYXgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYWdpbmF0ZShpdGVtc1BlclBhZ2UsIGN1cnJlbnRQYWdlLCBpbmRleCkgewogICAgICBjdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlIC0gMQogICAgICByZXR1cm4gaXRlbXNQZXJQYWdlICogY3VycmVudFBhZ2UgKyAoaW5kZXggKyAxKQogICAgfSwKICAgIGdldEluY29tZURvY3MoKSB7CiAgICAgIEluY29tZVNlcnZpY2UuZ2V0SW5jb21lRG9jcyh0aGlzLnNlYXJjaCwgdGhpcy5wYXlsb2FkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5pbmNvbWVzID0gcmVzLmRhdGEubGlzdAogICAgICAgIHRoaXMudG90YWxJbmNvbWUgPSByZXMuZGF0YS50b3RhbAogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBnZXREZXBhcnRtZW50cygpIHsKICAgICAgRGVwYXJ0bWVudFNlcnZpY2UuZ2V0RGVwYXJ0bWVudHNMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXMuZGF0YQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBnZXRDb250cmFnZW50cygpIHsKICAgICAgQ29udHJhZ2VudFNlcnZpY2UuZ2V0Q29udHJhZ2VudHMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jb250cmFnZW50TGlzdCA9IHJlcy5kYXRhCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGdldEl0ZW1zKHNlYXJjaCkgewogICAgICBsZXQgcGF5bG9hZCA9IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxMDAwMDAwCiAgICAgIH0KICAgICAgUHJvZHVjdFNlcnZpY2UuZ2V0SXRlbXNMaXN0KHBheWxvYWQsIHNlYXJjaCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuaXRlbUxpc3QgPSByZXMuZGF0YS5saXN0CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGNyZWF0ZUZvcm0oKSB7CiAgICAgIEluY29tZVNlcnZpY2UuY3JlYXRlSW5jb21lRG9jKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZm9ybUluY29tZSA9IHt9CiAgICAgICAgdGhpcy5mb3JtSW5jb21lID0gcmVzLmRhdGEKICAgICAgICB0aGlzLmZvcm1JbmNvbWUucmVnRGF0ZSA9IHJlcy5kYXRhLnJlZ0RhdGUKICAgICAgICB0aGlzLmZvcm1JbmNvbWUudG9EZXBhcnRtZW50SWQgPSAnJwogICAgICAgIHRoaXMuZm9ybUluY29tZS5jb250cmFnZW50SWQgPSAnJwogICAgICAgIHRoaXMuZm9ybUluY29tZS53aERvY0l0ZW1zID0gW10KICAgICAgICB0aGlzLmZvcm1JbmNvbWUud2hJdGVtcyA9IFtdCiAgICAgICAgdGhpcy5pdGVtSWQgPSAnJwogICAgICAgIHRoaXMuZHluYW1pY0l0ZW0gPSB7fQogICAgICAgIHRoaXMuZ2V0SXRlbXMoJycpOwogICAgICAgIHRoaXMuZ2V0RGVwYXJ0bWVudHMoKTsKICAgICAgICB0aGlzLmdldENvbnRyYWdlbnRzKCk7CiAgICAgICAgdGhpcy5jcmVhdGVFZGl0TW9kYWwgPSB0cnVlCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgIHRpdGxlOiBlLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHZpZXdGb3JtKGRvY0lkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvd21zL2luY29tZS12aWV3LyR7ZG9jSWR9YCkKICAgIH0sCiAgICBlZGl0Rm9ybShkb2NJZCkgewogICAgICBJbmNvbWVTZXJ2aWNlLmdldEluY29tZURvY0J5SWQoZG9jSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLml0ZW1JZCA9ICcnCiAgICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHt9CiAgICAgICAgdGhpcy5mb3JtSW5jb21lID0gewogICAgICAgICAgLi4ucmVzLmRhdGEsCiAgICAgICAgICB3aEl0ZW1zOiByZXMuZGF0YS53aERvY0l0ZW1zLAogICAgICAgICAgd2hEb2NJdGVtczpudWxsLAogICAgICAgIH0KICAgICAgICB0aGlzLmNyZWF0ZUVkaXRNb2RhbCA9IHRydWUKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgZGVsZXRlRm9ybShpZCkgewogICAgICB0aGlzLmRvY0lkID0gbnVsbAogICAgICB0aGlzLmRvY0lkID0gaWQKICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IHRydWUKICAgIH0sCiAgICBkZWxldGVJbmNvbWVEb2MoKSB7CiAgICAgIEluY29tZVNlcnZpY2UuZGVsZXRlSW5jb21lRG9jKHRoaXMuZG9jSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdzdWNjZXNzX2RlbGV0ZWQnKSwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgfSkKICAgICAgICB0aGlzLmdldEluY29tZURvY3MoKTsKICAgICAgICB0aGlzLmRlbGV0ZU1vZGFsID0gZmFsc2UKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgIHR5cGU6J2NvbmZpcm0nLAogICAgICAgICAgdGl0bGU6IGUubWVzc2FnZSwKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgaXRlbVNldChpdGVtSWQpIHsKICAgICAgdGhpcy5pdGVtTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmlkID09PSBpdGVtSWQpIHsKICAgICAgICAgIHRoaXMuZHluYW1pY0l0ZW0gPSBpdGVtCiAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZHluYW1pY0l0ZW0sIHtpdGVtSWQ6IGl0ZW0uaWR9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBhZGRUb1doTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuZHluYW1pY0l0ZW0ucHJpY2UgJiYgdGhpcy5keW5hbWljSXRlbS5pbmNvbWVQcmljZSkgewogICAgICAgIGxldCBoYXMgPSBmYWxzZSwKICAgICAgICAgICAgaW5kID0gMAogICAgICAgIHRoaXMuZm9ybUluY29tZS53aEl0ZW1zLmZvckVhY2goKHdoSXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgIGlmICh3aEl0ZW0uaWQgPT09IHRoaXMuZHluYW1pY0l0ZW0uaWQpIHsKICAgICAgICAgICAgaGFzID0gdHJ1ZQogICAgICAgICAgICBpbmQgPSBpbmRleAogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgaWYgKGhhcykgewogICAgICAgICAgdGhpcy5mb3JtSW5jb21lLndoSXRlbXMuc3BsaWNlKGluZCwgMSkKICAgICAgICB9CiAgICAgICAgbGV0IGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmR5bmFtaWNJdGVtKQogICAgICAgIHRoaXMuZHluYW1pY0l0ZW0uc2l6ZXMuZm9yRWFjaCgocywgaSkgPT4gewogICAgICAgICAgbGV0IHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pCiAgICAgICAgICBpZiAocy5jb3VudCkgewogICAgICAgICAgICBpZiAoIXRtcC5pdGVtSWQpIHsKICAgICAgICAgICAgICB0bXAuaXRlbUlkID0gdG1wLmlkCiAgICAgICAgICAgICAgdG1wLmlkID0gbnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIHRtcC5zaXplSWQgPSBzLmlkCiAgICAgICAgICAgIHRtcC5zaXplT2xjaGFtID0gcy5vbGNoYW0KICAgICAgICAgICAgdG1wLmNvdW50ID0gcy5jb3VudAogICAgICAgICAgICB0aGlzLmZvcm1JbmNvbWUud2hJdGVtcy51bnNoaWZ0KHRtcCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMuZ2V0SXRlbXMoJycpOwogICAgICAgIHRoaXMuZHluYW1pY0l0ZW0gPSB7fQogICAgICAgIHRoaXMuaXRlbUlkID0gJycKICAgICAgICB0aGlzLmR5bmFtaWNJdGVtLmVkaXRhYmxlID0gZmFsc2UKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgZWRpdER5bmFtaWNJdGVtKGluZGV4LCBpdGVtKSB7CiAgICAgIHRoaXMuZm9ybUluY29tZS53aEl0ZW1zLnNwbGljZShpbmRleCwgMSkKICAgICAgbGV0IHRtcCA9IHsKICAgICAgICBpdGVtSWQ6IGl0ZW0uaXRlbUlkLAogICAgICAgIC8vIGl0ZW1OYW1lOiBpdGVtLm5hbWUgPyBpdGVtLm5hbWUgOiBpdGVtLml0ZW1OYW1lLAogICAgICAgIGNrdTogaXRlbS5ja3UsCiAgICAgICAgc2l6ZXM6IFsKICAgICAgICAgIHtpZDogaXRlbS5zaXplSWQsIG9sY2hhbTogaXRlbS5zaXplT2xjaGFtLCBjb3VudDogaXRlbS5jb3VudH0KICAgICAgICBdLAogICAgICAgIHByaWNlOiBpdGVtLnByaWNlLAogICAgICAgIGluY29tZVByaWNlOiBpdGVtLmluY29tZVByaWNlCiAgICAgIH0KICAgICAgdGhpcy5keW5hbWljSXRlbSA9IHRtcAogICAgICB0aGlzLmR5bmFtaWNJdGVtLmVkaXRhYmxlID0gdHJ1ZQogICAgfSwKICAgIGRlbGV0ZUR5bmFtaWNJdGVtKGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybUluY29tZS53aEl0ZW1zLnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBzYXZlKHN0YXR1cykgewogICAgICB0aGlzLiRyZWZzLmluY29tZUZvcm0udmFsaWRhdGUoKS50aGVuKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybUluY29tZS5zdGF0dXMgPSBzdGF0dXMKICAgICAgICAgIHRoaXMuZm9ybUluY29tZS53aERvY0l0ZW1zID0gbnVsbAogICAgICAgICAgbGV0IHRtcCA9IHRydWUKICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdSRUFEWScpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybUluY29tZS53aEl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0bXAgPSB0cnVlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG1wID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnaXRlbV9yZXF1aXJlZF9lcnJvcicpLAogICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHRtcCkgewogICAgICAgICAgICBJbmNvbWVTZXJ2aWNlLnNhdmVJbmNvbWVEb2ModGhpcy5mb3JtSW5jb21lKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVFZGl0TW9kYWwgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuZ2V0SW5jb21lRG9jcygpOwogICAgICAgICAgICAgIHRoaXMuJHZzLm5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLiR0KCdzdWNjZXNzX3VwZGF0ZWQnKSwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgICAgICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgICB0aGlzLiR2cy5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgICAgICBwcm9ncmVzczogJ2F1dG8nLAogICAgICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgdHlwZTonY29uZmlybScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgncmVxdWlyZWRfZXJyb3InKSwKICAgICAgICAgICAgcHJvZ3Jlc3M6ICdhdXRvJywKICAgICAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SW5jb21lRG9jcygpOwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA2TA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/modules/wms/income","sourcesContent":["<template>\n  <div>\n    <q-table\n      v-if=\"windowWidth > 600\"\n      row-key=\"id\"\n      row=\"row\"\n      :data=\"incomes\"\n      class=\"shadow-10\"\n      :columns=\"columns\"\n      :hide-pagination=\"true\"\n      :rows-per-page-options=\"[0]\"\n    >\n      <template v-slot:top>\n        <div v-if=\"windowWidth > 600\" class=\"q-table__title\">{{ $t('wms.income.title') }}</div>\n        <q-space v-if=\"windowWidth > 600\"/>\n        <vs-input primary icon-after class=\"q-mr-lg\" v-model=\"search\" :placeholder=\"$t('actions.search')\">\n          <template #icon>\n            <q-icon name=\"search\"/>\n          </template>\n        </vs-input>\n        <q-space v-if=\"windowWidth < 600\"/>\n        <vs-button success animation-type=\"rotate\" @click=\"createForm\">\n          <q-icon name=\"add\"/>\n          <template #animate>\n            <q-icon name=\"add\"/>\n          </template>\n        </vs-button>\n        <q-separator/>\n      </template>\n      <template v-slot:body-cell-id=\"props\">\n        <q-td class=\"text-center\">{{ paginate(payload.limit, payload.page, props.rowIndex) }}</q-td>\n      </template>\n      <template v-if=\"windowWidth > 600\" v-slot:body-cell-actions=\"props\">\n        <q-td class=\"text-center\">\n          <vs-button v-if=\"props.row.status === 'READY'\" style=\"display: inline-block\" flat icon dark @click=\"viewForm(props.row.id)\">\n            <q-icon name=\"visibility\"/>\n          </vs-button>\n          <vs-button v-if=\"$can('Update', 'wareHouseDocument') && props.row.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon primary @click=\"editForm(props.row.id)\">\n            <q-icon name=\"edit\"/>\n          </vs-button>\n          <vs-button v-if=\"$can('delete', 'WarehouseDoc') && props.row.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon danger @click=\"deleteForm(props.row.id)\">\n            <q-icon name=\"delete\"/>\n          </vs-button>\n        </q-td>\n      </template>\n    </q-table>\n    <template v-if=\"windowWidth < 600\">\n      <q-toolbar>\n        <div v-if=\"windowWidth > 600\" class=\"q-toolbar__title\">{{ $t('wms.income.title') }}</div>\n        <q-space v-if=\"windowWidth > 600\"/>\n        <vs-input primary icon-after  v-model=\"search\" :placeholder=\"$t('actions.search')\">\n          <template #icon>\n            <q-icon name=\"search\"/>\n          </template>\n        </vs-input>\n        <q-space v-if=\"windowWidth < 600\"/>\n        <vs-button success animation-type=\"rotate\" @click=\"createForm\">\n          <q-icon name=\"add\"/>\n          <template #animate>\n            <q-icon name=\"add\"/>\n          </template>\n        </vs-button>\n        <q-separator/>\n      </q-toolbar>\n      <div class=\"ml-2 q-pa-xs col-xs-12 col-sm-6\" v-for=\"income in incomes\"\n           :key=\"income.id\">\n        <q-expansion-item\n            :label=\"income.regNumber\"\n            style=\"border-radius: 15px;\"\n            expand-icon-class=\"text-white\"\n            header-class=\"text-white\"\n            :header-class=\"income.status === 'READY' ? 'bg-green-13' : 'bg-yellow-5'\"\n            class=\"shadow-24 overflow-hidden mr-2\"\n        >\n          <q-card dense>\n            <q-card-section>\n              <q-list bordered separator dense>\n                <q-item v-ripple>\n                  <q-item-section>\n                    <q-item-label>{{ $t('doc.regNumber') }}: <b class=\"ml-1\" style=\"color: red\">{{ income.regNumber }}</b></q-item-label>\n                  </q-item-section>\n                </q-item>\n                <q-item v-ripple>\n                  <q-item-section>\n                    <q-item-label>{{ $t('doc.regDate') }}: <b class=\"ml-1\" style=\"color: red\">{{ income.regDate }}</b></q-item-label>\n                  </q-item-section>\n                 </q-item>\n                <q-item>\n                   <q-item-section>\n                     <q-item-label>{{ $t('doc.department') }}: <b class=\"ml-1\" style=\"color: red\">{{ income.toDepartmentName }}</b></q-item-label>\n                   </q-item-section>\n                 </q-item>\n                <q-item>\n                   <q-item-section>\n                     <q-item-label>{{ $t('doc.contragent') }}: <b class=\"ml-1\" style=\"color: red\">{{ income.contragentName }}</b></q-item-label>\n                   </q-item-section>\n                 </q-item>\n                <q-item>\n                   <q-item-section>\n                     <vs-row>\n                       <vs-col justify=\"center\" align=\"center\">\n                         <vs-button v-if=\"income.status === 'READY'\" style=\"display: inline-block\" flat icon dark @click=\"viewForm(income.id)\">\n                           <q-icon name=\"visibility\"/>\n                         </vs-button>\n                         <vs-button v-if=\"income.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon primary @click=\"editForm(income.id)\">\n                           <q-icon name=\"edit\"/>\n                         </vs-button>\n                         <vs-button v-if=\"income.status === 'SUSPENDED'\" style=\"display: inline-block\" flat icon danger @click=\"deleteForm(income.id)\">\n                           <q-icon name=\"delete\"/>\n                         </vs-button>\n                       </vs-col>\n                     </vs-row>\n                   </q-item-section>\n                </q-item>\n\n              </q-list>\n            </q-card-section>\n          </q-card>\n        </q-expansion-item>\n      </div>\n    </template>\n    <div class=\"row justify-center q-mt-md\">\n      <q-pagination v-model=\"payload.page\" :max=\"maxIncome\" :max-pages=\"4\" direction-links boundary-links push/>\n    </div>\n\n    <!--           Create / Edit           -->\n    <vs-dialog v-model=\"createEditModal\" blur prevent-close width=\"100%\">\n      <template #header>\n        <b v-if=\"create\">{{ $t('wms.new_income') }}</b>\n        <b v-else>{{ $t('wms.edit_income') }}</b>\n      </template>\n      <q-separator/>\n      <validation-observer ref=\"incomeForm\" v-slot=\"{}\">\n        <vs-row>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"departmentId\">\n              <vs-select\n                  block\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.department')\"\n                  :class=\"!valid ? 'required' : ''\"\n                  v-model=\"formIncome.toDepartmentId\"\n                  :key=\"`departmentList-${departmentList.length}`\"\n              >\n                <vs-option-group>\n                  <div>{{ $t('doc.department') }}</div>\n                  <vs-option v-for=\"(dep, i) in departmentList\" :key=\"`departmentList-${i}`\" :label=\"dep.name\" :value=\"dep.id\">\n                    {{ dep.name }}\n                  </vs-option>\n                </vs-option-group>\n              </vs-select>\n            </validation-provider>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"regNumber\">\n              <vs-input\n                  block\n                  primary\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.regNumber')\"\n                  v-model=\"formIncome.regNumber\"\n                  :class=\"!valid ? 'required' : ''\"\n              />\n            </validation-provider>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"contragentId\">\n              <vs-select\n                  block\n                  class=\"mt-3\"\n                  :danger=\"!valid\"\n                  :label=\"$t('doc.contragent')\"\n                  :class=\"!valid ? 'required' : ''\"\n                  v-model=\"formIncome.contragentId\"\n                  :key=\"`contragentList-${contragentList.length}`\"\n              >\n                <vs-option-group>\n                  <div>{{ $t('doc.contragent') }}</div>\n                  <vs-option v-for=\"(con, ind) in contragentList\" :key=\"`contragent-${ind}`\" :label=\"con.name\" :value=\"con.id\">\n                    {{ con.name }}\n                  </vs-option>\n                </vs-option-group>\n              </vs-select>\n            </validation-provider>\n          </vs-col>\n<!--          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">-->\n<!--            <validation-provider v-slot=\"{valid}\" rules=\"required\" name=\"regDate\">-->\n<!--              <vs-input-->\n<!--                  block-->\n<!--                  primary-->\n<!--                  type=\"date\"-->\n<!--                  class=\"mt-3\"-->\n<!--                  :danger=\"!valid\"-->\n<!--                  :label=\"$t('doc.regDate')\"-->\n<!--                  v-model=\"formIncome.regDate\"-->\n<!--                  :class=\"!valid ? 'required' : ''\"-->\n<!--              />-->\n<!--            </validation-provider>-->\n<!--          </vs-col>-->\n          <vs-col w=\"12\">\n            <vs-row>\n              <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n                <validation-provider v-slot=\"{valid}\" name=\"itemId\">\n                  <vs-select\n                      block\n                      class=\"mt-3\"\n                      v-model=\"itemId\"\n                      @change=\"itemSet($event)\"\n                      :label=\"$t('references.product')\"\n                      :key=\"`itemList-${itemList.length}`\"\n                  >\n                    <vs-option-group>\n                      <div>{{ $t('references.product') }}</div>\n                      <vs-option v-for=\"(it, ind) in itemList\" :key=\"`items-${ind}`\" :label=\"`${it.cku} / ${it.colorName}`\" :value=\"it.id\">\n                        {{ it.cku }} / {{it.colorName}}\n                      </vs-option>\n                    </vs-option-group>\n                  </vs-select>\n                </validation-provider>\n              </vs-col>\n              <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n                <validation-provider v-slot=\"{valid}\">\n                  <vs-input block primary icon-after class=\"q-mr-lg mt-3\" v-model=\"search1\" :placeholder=\"$t('actions.search')\">\n                    <template #icon>\n                      <q-icon name=\"search\"/>\n                    </template>\n                  </vs-input>\n                </validation-provider>\n              </vs-col>\n            </vs-row>\n            <vs-row v-if=\"itemId\">\n              <vs-col w=\"3\" v-for=\"sizeCount in dynamicItem.sizes\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"`${$t('items.count')} - ${sizeCount.olcham}`\" v-model=\"sizeCount.count\"/>\n              </vs-col>\n            </vs-row>\n            <vs-row v-if=\"itemId\">\n              <vs-col w=\"6\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"$t('items.income_price')\" v-model=\"dynamicItem.incomePrice\"/>\n              </vs-col>\n              <vs-col w=\"6\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"$t('items.price')\" v-model=\"dynamicItem.price\"/>\n              </vs-col>\n              <vs-col w=\"12\" align=\"center\" class=\"mt-1\">\n                <vs-button flat @click=\"addToWhList\">{{ $t('actions.add') }}</vs-button>\n              </vs-col>\n            </vs-row>\n            <vs-row v-if=\"dynamicItem.editable\">\n              <vs-row>\n                <vs-col w=\"12\">\n                  <b>{{ dynamicItem.cku }} / {{ dynamicItem.brandName }}</b>\n                </vs-col>\n              </vs-row>\n              <vs-col w=\"3\" v-for=\"sizeCount in dynamicItem.sizes\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"`${$t('items.count')} - ${sizeCount.olcham}`\" v-model=\"sizeCount.count\"/>\n              </vs-col>\n            </vs-row>\n            <vs-row v-if=\"dynamicItem.editable\">\n              <vs-col w=\"6\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"$t('items.income_price')\" v-model=\"dynamicItem.incomePrice\"/>\n              </vs-col>\n              <vs-col w=\"6\">\n                <vs-input state=\"primary\" type=\"number\" block class=\"mt-3\" :label=\"$t('items.price')\" v-model=\"dynamicItem.price\"/>\n              </vs-col>\n              <vs-col w=\"12\" align=\"center\" class=\"mt-1\">\n                <vs-button flat @click=\"addToWhList\">{{ $t('actions.add') }}</vs-button>\n              </vs-col>\n            </vs-row>\n            <vs-row v-if=\"formIncome.whItems.length > 0\" class=\"mt-2\">\n              <vs-col w=\"12\">\n                <q-table class=\"shadow-10\" dense row=\"row\" row-key=\"id\" :data=\"formIncome.whItems\" :columns=\"dynamicItemCols\" :hide-pagination=\"true\" :rows-per-page-options=\"[0]\">\n                  <template v-slot:body-cell-id=\"props\">\n                    <q-td class=\"text-center\">\n                      {{ props.rowIndex+1 }}\n                    </q-td>\n                  </template>\n                  <template v-slot:body-cell-name=\"props\">\n                    <q-td class=\"text-center\">\n                      {{ props.row.name ? props.row.name : props.row.brandName }}\n                    </q-td>\n                  </template>\n                  <template v-slot:body-cell-actions=\"props\">\n                    <q-td class=\"text-center\">\n                      <vs-button @click=\"editDynamicItem(props.rowIndex, props.row)\" style=\"display: inline-block\" flat icon primary>\n                        <q-icon name=\"edit\"/>\n                      </vs-button>\n                      <vs-button @click=\"deleteDynamicItem(props.rowIndex)\" style=\"display: inline-block\" flat icon danger>\n                        <q-icon name=\"delete\"/>\n                      </vs-button>\n                    </q-td>\n                  </template>\n                </q-table>\n              </vs-col>\n            </vs-row>\n          </vs-col>\n        </vs-row>\n      </validation-observer>\n      <template #footer>\n        <vs-row>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button @click=\"save('SUSPENDED')\" :class=\"windowWidth > 600 ? 'mt-2 mr-1' : 'mt-1'\" block warn gradient>{{ $t('actions.save') }}</vs-button>\n          </vs-col>\n          <vs-col :w=\"windowWidth > 600 ? '6' : '12'\">\n            <vs-button @click=\"save('READY')\" :class=\"windowWidth > 600 ? 'mt-2 mr-1' : 'mt-1'\" block success gradient>{{ $t('actions.save_end_finish') }}</vs-button>\n          </vs-col>\n        </vs-row>\n      </template>\n    </vs-dialog>\n\n    <!--       Delete       -->\n    <confirm-modal :model=\"deleteModal\" @submit=\"deleteIncomeDoc\" @close=\"deleteModal = false\" :text=\"$t('confirm_delete')\"/>\n  </div>\n</template>\n<script>\nimport ConfirmModal from \"../../../components/confirmModal.vue\"\nimport DepartmentService from \"../../management/department/department.service\";\nimport ContragentService from \"../../references/contragent/contragent.servie\";\nimport IncomeService from \"./income.service\";\nimport ProductService from \"../../references/product/product.service\";\n\nexport default {\n  name: \"index\",\n  components: {ConfirmModal},\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      incomes: [],\n      totalIncome: 0,\n      payload: {\n        page: 1,\n        limit: 20\n      },\n      columns: [\n        {name: 'id', align: 'center', label: this.$t('doc.index'), field: 'id'},\n        {name: 'regNumber', align: 'left', label: this.$t('doc.regNumber'), field: 'regNumber'},\n        {name: 'regDate', align: 'center', label: this.$t('doc.regDate'), field: 'regDate'},\n        {name: 'toDepartmentName', align: 'center', label: this.$t('doc.department'), field: 'toDepartmentName'},\n        {name: 'contragentName', align: 'center', label: this.$t('doc.contragent'), field: 'contragentName'},\n        {name: 'status', align: 'center', label: this.$t('doc.status'), field: 'status'},\n        {name: 'actions', align: 'center', label: this.$t('doc.action'), field: 'actions'}\n      ],\n      visibleColumns: ['regNumber', 'regDate', 'toDepartmentName', 'contragentName','status'],\n      visibleColumn: ['id','regNumber', 'regDate', 'toDepartmentName', 'contragentName','status','actions'],\n      dynamicItemCols: [\n        {name: 'id', align: 'center', label: this.$t('items.index'), field: 'id'},\n        {name: 'cku', align: 'center', label: this.$t('items.sku'), field: 'cku'},\n        // {name: 'name', align: 'center', label: this.$t('items.name'), field: 'name'},\n        {name: 'size', align: 'center', label: this.$t('items.size'), field: 'sizeOlcham'},\n        {name: 'count', align: 'center', label: this.$t('items.count'), field: 'count'},\n        {name: 'incomePrice', align: 'center', label: this.$t('items.income_price'), field: 'incomePrice'},\n        {name: 'price', align: 'center', label: this.$t('items.price'), field: 'price'},\n        {name: 'actions', align: 'center', label: this.$t('items.action'), field: 'actions'}\n      ],\n      search: '',\n      search1: '',\n      create: true,\n      createEditModal: false,\n      deleteModal: false,\n      docId: null,\n      formIncome: {},\n      departmentList: [],\n      contragentList: [],\n      itemList: [],\n      itemId: '',\n      dynamicItem: {}\n    }\n  },\n  watch: {\n    'search': {\n      handler(e) {\n        this.getIncomeDocs();\n      }\n    },\n    'payload.page': {\n      handler(e) {\n        this.getIncomeDocs();\n      }\n    },\n    'search1': {\n      handler(e) {\n        this.getItems(e)\n      }\n    }\n  },\n  computed: {\n    maxIncome() {\n      let max = this.totalIncome / this.payload.limit\n      return Math.ceil(max)\n    }\n  },\n  methods: {\n    paginate(itemsPerPage, currentPage, index) {\n      currentPage = currentPage - 1\n      return itemsPerPage * currentPage + (index + 1)\n    },\n    getIncomeDocs() {\n      IncomeService.getIncomeDocs(this.search, this.payload).then(res => {\n        this.incomes = res.data.list\n        this.totalIncome = res.data.total\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          duration: 1000,\n          title: e.message,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    getDepartments() {\n      DepartmentService.getDepartmentsList().then(res => {\n        this.departmentList = res.data\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    getContragents() {\n      ContragentService.getContragents().then(res => {\n        this.contragentList = res.data\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    getItems(search) {\n      let payload = {\n        page: 1,\n        limit: 1000000\n      }\n      ProductService.getItemsList(payload, search).then(res => {\n        this.itemList = res.data.list\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    createForm() {\n      IncomeService.createIncomeDoc().then(res => {\n        this.formIncome = {}\n        this.formIncome = res.data\n        this.formIncome.regDate = res.data.regDate\n        this.formIncome.toDepartmentId = ''\n        this.formIncome.contragentId = ''\n        this.formIncome.whDocItems = []\n        this.formIncome.whItems = []\n        this.itemId = ''\n        this.dynamicItem = {}\n        this.getItems('');\n        this.getDepartments();\n        this.getContragents();\n        this.createEditModal = true\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    viewForm(docId) {\n      this.$router.push(`/wms/income-view/${docId}`)\n    },\n    editForm(docId) {\n      IncomeService.getIncomeDocById(docId).then(res => {\n        this.itemId = ''\n        this.dynamicItem = {}\n        this.formIncome = {\n          ...res.data,\n          whItems: res.data.whDocItems,\n          whDocItems:null,\n        }\n        this.createEditModal = true\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    deleteForm(id) {\n      this.docId = null\n      this.docId = id\n      this.deleteModal = true\n    },\n    deleteIncomeDoc() {\n      IncomeService.deleteIncomeDoc(this.docId).then(res => {\n        this.$vs.notification({\n          type:'confirm',\n          duration: 1000,\n          title: this.$t('success_deleted'),\n          progress: 'auto',\n          color: 'success',\n          position: 'top-right'\n        })\n        this.getIncomeDocs();\n        this.deleteModal = false\n      }).catch(e => {\n        this.$vs.notification({\n          type:'confirm',\n          title: e.message,\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      })\n    },\n    itemSet(itemId) {\n      this.itemList.forEach(item => {\n        if (item.id === itemId) {\n          this.dynamicItem = item\n          Object.assign(this.dynamicItem, {itemId: item.id})\n        }\n      })\n    },\n    addToWhList() {\n      if (this.dynamicItem.price && this.dynamicItem.incomePrice) {\n        let has = false,\n            ind = 0\n        this.formIncome.whItems.forEach((whItem, index) => {\n          if (whItem.id === this.dynamicItem.id) {\n            has = true\n            ind = index\n          }\n        })\n        if (has) {\n          this.formIncome.whItems.splice(ind, 1)\n        }\n        let item = Object.assign({}, this.dynamicItem)\n        this.dynamicItem.sizes.forEach((s, i) => {\n          let tmp = Object.assign({}, item)\n          if (s.count) {\n            if (!tmp.itemId) {\n              tmp.itemId = tmp.id\n              tmp.id = null\n            }\n            tmp.sizeId = s.id\n            tmp.sizeOlcham = s.olcham\n            tmp.count = s.count\n            this.formIncome.whItems.unshift(tmp)\n          }\n        })\n        this.getItems('');\n        this.dynamicItem = {}\n        this.itemId = ''\n        this.dynamicItem.editable = false\n      } else {\n        this.$vs.notification({\n          type:'confirm',\n          title: '',\n          duration: 1000,\n          progress: 'auto',\n          color: 'danger',\n          position: 'top-right'\n        })\n      }\n    },\n    editDynamicItem(index, item) {\n      this.formIncome.whItems.splice(index, 1)\n      let tmp = {\n        itemId: item.itemId,\n        // itemName: item.name ? item.name : item.itemName,\n        cku: item.cku,\n        sizes: [\n          {id: item.sizeId, olcham: item.sizeOlcham, count: item.count}\n        ],\n        price: item.price,\n        incomePrice: item.incomePrice\n      }\n      this.dynamicItem = tmp\n      this.dynamicItem.editable = true\n    },\n    deleteDynamicItem(index) {\n      this.formIncome.whItems.splice(index, 1)\n    },\n    save(status) {\n      this.$refs.incomeForm.validate().then(valid => {\n        if (valid) {\n          this.formIncome.status = status\n          this.formIncome.whDocItems = null\n          let tmp = true\n          if (status === 'READY') {\n            if (this.formIncome.whItems.length > 0) {\n              tmp = true\n            } else {\n              tmp = false\n              this.$vs.notification({\n                type:'confirm',\n                title: this.$t('item_required_error'),\n                progress: 'auto',\n                duration: 1000,\n                color: 'danger',\n                position: 'top-right'\n              })\n            }\n          }\n          if (tmp) {\n            IncomeService.saveIncomeDoc(this.formIncome).then(res => {\n              this.createEditModal = false\n              this.getIncomeDocs();\n              this.$vs.notification({\n                type:'confirm',\n                title: this.$t('success_updated'),\n                progress: 'auto',\n                duration: 1000,\n                color: 'success',\n                position: 'top-right'\n              })\n            }).catch(e => {\n              this.$vs.notification({\n                type:'confirm',\n                title: e.message,\n                duration: 1000,\n                progress: 'auto',\n                color: 'danger',\n                position: 'top-right'\n              })\n            })\n          }\n        } else {\n          this.$vs.notification({\n            type:'confirm',\n            duration: 1000,\n            title: this.$t('required_error'),\n            progress: 'auto',\n            color: 'danger',\n            position: 'top-right'\n          })\n        }\n      })\n    }\n  },\n  created() {\n    this.getIncomeDocs();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}