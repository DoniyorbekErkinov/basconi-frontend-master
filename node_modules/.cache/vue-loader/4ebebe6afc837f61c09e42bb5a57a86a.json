{"remainingRequest":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\request\\nakladnoy.vue?vue&type=script&lang=js&","dependencies":[{"path":"P:\\noenter\\basconi-frontend-master\\src\\modules\\wms\\request\\nakladnoy.vue","mtime":1652787130000},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695882313197},{"path":"P:\\noenter\\basconi-frontend-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1695882545643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBSZXF1ZXN0U2VydmljZSBmcm9tICIuL3JlcXVlc3Quc2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibmFrbGFkbm95IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2luZG93V2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgICBpbmNvbWU6IHt9LAogICAgICBwZW5kaW5nRm9ybTogewogICAgICAgIHdoSXRlbXM6IHsKICAgICAgICAgIGNvdW50OiBudWxsCiAgICAgICAgfQogICAgICB9LAogICAgICBjb2x1bW5zOiBbCiAgICAgICAge25hbWU6ICdpZCcsIGFsaWduOiAnY2VudGVyJywgbGFiZWw6IHRoaXMuJHQoJ2l0ZW1zLmluZGV4JyksIGZpZWxkOiAnaWQnfSwKICAgICAgICAvLyB7bmFtZTogJ2l0ZW1OYW1lJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMubmFtZScpLCBmaWVsZDogJ2l0ZW1OYW1lJ30sCiAgICAgICAge25hbWU6ICdja3UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5za3UnKSwgZmllbGQ6ICdpdGVtQ2t1J30sCiAgICAgICAge25hbWU6ICdzaXplJywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuc2l6ZScpLCBmaWVsZDogJ3NpemVPbGNoYW0nfSwKICAgICAgICB7bmFtZTogJ2NvdW50JywgYWxpZ246ICdjZW50ZXInLCBsYWJlbDogdGhpcy4kdCgnaXRlbXMuY291bnQnKSwgZmllbGQ6ICdjb3VudCd9LAogICAgICAgIHtuYW1lOiAncHJpY2UnLCBhbGlnbjogJ2NlbnRlcicsIGxhYmVsOiB0aGlzLiR0KCdpdGVtcy5wcmljZScpLCBmaWVsZDogJ3ByaWNlJ30sCiAgICAgIF0sCiAgICAgIGR5bmFtaWM6IHsKICAgICAgICBjb3VudDogW10KICAgICAgfSwKICAgICAgdXNlckRlcElkOiAiIgogICAgfQogIH0sCiAgd2F0Y2g6IHt9LAogIG1ldGhvZHM6IHsKICAgIHByaW50KCkgewogICAgICB3aW5kb3cucHJpbnQoKTsKICAgIH0sCiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgIH0sCiAgICBzYXZlKHN0YXR1cykgewogICAgICB0aGlzLnBlbmRpbmdGb3JtID0gdGhpcy5pbmNvbWUKICAgICAgdGhpcy5wZW5kaW5nRm9ybS5zdGF0dXMgPSBzdGF0dXMKICAgICAgdGhpcy5wZW5kaW5nRm9ybS53aEl0ZW1zID0gdGhpcy5pbmNvbWUud2hJdGVtcwogICAgICBSZXF1ZXN0U2VydmljZS5zYXZlSW5jb21lVHJhbnNmZXJEb2ModGhpcy5wZW5kaW5nRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgICAgfSkKICAgIH0sCiAgICBnZXRVc2VySW5mbygpIHsKICAgICAgbGV0IHVzZXJJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pbmZvJykpCiAgICAgIHJldHVybiB0aGlzLnVzZXJEZXBJZCA9IHVzZXJJbmZvLmRlcGFydG1lbnQKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgIFJlcXVlc3RTZXJ2aWNlLmdldFRyYW5zZmVyRG9jQnlJZChpZCkudGhlbihyZXMgPT4gewogICAgICB0aGlzLmluY29tZSA9IHJlcy5kYXRhCiAgICB9KS5jYXRjaChlID0+IHsKICAgICAgdGhpcy4kdnMubm90aWZpY2F0aW9uKHsKICAgICAgICB0eXBlOidjb25maXJtJywKICAgICAgICB0aXRsZTogZS5tZXNzYWdlLAogICAgICAgIHByb2dyZXNzOiAnYXV0bycsCiAgICAgICAgY29sb3I6ICdkYW5nZXInLAogICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JwogICAgICB9KQogICAgfSkKICAgIGF3YWl0IHRoaXMuZ2V0VXNlckluZm8oKQogIH0KfQo="},{"version":3,"sources":["nakladnoy.vue"],"names":[],"mappings":";AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nakladnoy.vue","sourceRoot":"src/modules/wms/request","sourcesContent":["<template>\n  <q-card class=\"shadow-24\">\n    <q-toolbar>\n      <vs-button @click=\"goBack\" icon flat primary><q-icon name=\"arrow_back\"/></vs-button>\n      <q-toolbar-title v-if=\"windowWidth > 600\">\n        {{ $t('doc.regNumber') }} - {{ income.regNumber }}\n      </q-toolbar-title>\n      <q-space v-if=\"windowWidth < 600\"/>\n      <vs-button v-if=\"income.status === 'PENDING' && income.fromDepartmentId !== userDepId\" @click=\"save('READY')\" style=\"width: 150px\" block success gradient flat>Save</vs-button>\n<!--      <vs-button v-if=\"income.status !== 'PENDING'\" @click=\"print\" icon flat dark><q-icon name=\"print\"/></vs-button>-->\n    </q-toolbar>\n    <vs-row>\n      <vs-col v-if=\"windowWidth < 600\" class=\"mt-2\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.regNumber') }}:</b> {{ income.regNumber }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.regDate') }}:</b> {{ income.regDate }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.from_department') }}:</b> {{ income.fromDepartmentName }}\n      </vs-col>\n      <vs-col class=\"mt-1\" w=\"12\" align=\"left\">\n        <b class=\"ml-2\">{{ $t('doc.to_department') }}:</b> {{ income.toDepartmentName }}\n      </vs-col>\n    </vs-row>\n    <q-table :data=\"income.whItems\" :columns=\"columns\" row=\"row\" row-key=\"id+a\"  hide-pagination :rows-per-page-options=\"[0]\" class=\"mt-2\">\n      <template v-slot:body-cell-id=\"props\">\n        <q-td class=\"text-center\">{{ props.rowIndex + 1 }}</q-td>\n      </template>\n    </q-table>\n  </q-card>\n</template>\n\n<script>\nimport RequestService from \"./request.service\";\nexport default {\n  name: \"nakladnoy\",\n  data() {\n    return {\n      windowWidth: window.innerWidth,\n      income: {},\n      pendingForm: {\n        whItems: {\n          count: null\n        }\n      },\n      columns: [\n        {name: 'id', align: 'center', label: this.$t('items.index'), field: 'id'},\n        // {name: 'itemName', align: 'center', label: this.$t('items.name'), field: 'itemName'},\n        {name: 'cku', align: 'center', label: this.$t('items.sku'), field: 'itemCku'},\n        {name: 'size', align: 'center', label: this.$t('items.size'), field: 'sizeOlcham'},\n        {name: 'count', align: 'center', label: this.$t('items.count'), field: 'count'},\n        {name: 'price', align: 'center', label: this.$t('items.price'), field: 'price'},\n      ],\n      dynamic: {\n        count: []\n      },\n      userDepId: \"\"\n    }\n  },\n  watch: {},\n  methods: {\n    print() {\n      window.print();\n    },\n    goBack() {\n      this.$router.go(-1)\n    },\n    save(status) {\n      this.pendingForm = this.income\n      this.pendingForm.status = status\n      this.pendingForm.whItems = this.income.whItems\n      RequestService.saveIncomeTransferDoc(this.pendingForm).then(res => {\n        this.$router.go(-1)\n      })\n    },\n    getUserInfo() {\n      let userInfo = JSON.parse(localStorage.getItem('user_info'))\n      return this.userDepId = userInfo.department\n    }\n  },\n  async created() {\n    let id = this.$route.params.id\n    RequestService.getTransferDocById(id).then(res => {\n      this.income = res.data\n    }).catch(e => {\n      this.$vs.notification({\n        type:'confirm',\n        title: e.message,\n        progress: 'auto',\n        color: 'danger',\n        position: 'top-right'\n      })\n    })\n    await this.getUserInfo()\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}